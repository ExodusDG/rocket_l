$(document).on("click",".rlg-accordion .rlg-card-header",(function(){$(this).parent(".rlg-accordion").toggleClass("active"),$(this).find("i.fa").toggleClass("fa-caret-down").toggleClass("fa-caret-up")})),$(document).ready((function(){$("#account-avatar-upload").click((function(){$("#account-avatar-upload").html('<i class="fa fa-spinner fa-spin fa-fw"></i> Uploading…')})),$("#account-header-upload").click((function(){$("#account-header-upload").html('<i class="fa fa-spinner fa-spin fa-fw"></i> Uploading…')})),$(".rlg-account__psncancel").click((function(e){$(this).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>').prop("disabled",!0)})),$('input:radio[name="message-platform"]').change((function(){$("#all").is(":checked")?($("#status-all").addClass("active"),$("#status-sameonly").removeClass("active")):$("#sameonly").is(":checked")&&($("#status-all").removeClass("active"),$("#status-sameonly").addClass("active")),updateMessagePlatforms()})),$('input:radio[name="design-itemsize"]').change((function(){$("#itemsize-regular").is(":checked")?($("#status-itemsize-regular").addClass("active"),$("#status-itemsize-big").removeClass("active")):$("#itemsize-big").is(":checked")&&($("#status-itemsize-regular").removeClass("active"),$("#status-itemsize-big").addClass("active")),updateItemSizeSetting()})),$(".rlg-account__header").click((function(e){e.preventDefault();var t=$(this);if($(this).hasClass("--disabled"))$.siteAlert(window.headerError,"error");else{var a=$(this).data("header");$(this).addClass("--loading"),$.get("/ajaxfunctions/changeHeader.php?header="+a).done((function(e){"success"==e.substring(0,7)?($(".rlg-account__header").removeClass("--selected"),$(t).removeClass("--loading"),$(t).addClass("--selected"),console.log($(t))):($(t).removeClass("--loading"),$.siteAlert(e,"error"))}))}})),$("#account-about-save").click((function(e){e.preventDefault();var t=tinymce.get("account-about").getContent();console.log(t),$(this).text("Saving…"),$.post("/ajaxfunctions/changeAbout.php",{text:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($.siteAlert("Profile text saved!","success"),$("#account-about-save").text("Save profile text")):($.siteAlert(e,"error"),$("#account-about-save").text("Save profile text"))}))})),$("#epic-console, #epic-pc").click((function(e){e.preventDefault(),"epic-console"==$(this).attr("id")?(epicType="console",introText=$("#section-epic .rlg-account__platformintro").data("text-console"),$("#epicnote").hide()):(epicType="pc",introText=$("#section-epic .rlg-account__platformintro").data("text-pc")),$(".rlg-account__epicplatform").hide(),$("#account-linking-epic").show(),$("#section-epic .rlg-account__platformintro").text(introText),$("#account-epic-submit").attr("data-platform",epicType)})),$("#autoreply").length>0&&$("#rlglogo-footer").click((function(e){$("#messages-autoreply").show(),createCookie("showAutoReply",!0,100)}))}));var secsleft=null,leaguetype=null,checkinloop=null;$(document).ready((function(){$(".rlg_notification_toggle").on("click",(function(){$.post("/ajaxfunctions/updateNotificationPreferences.php",{param:$(this).data("type"),value:$(this).is(":checked"),csrf_token:window.csrf_token}).done((function(e){"success"!==e&&alert(e)}))})),$("#rlg-livefeed-get-more").on("click",(function(){var e=$(this).data("start-no");$.post("/ajaxfunctions/getMoreLivefeed.php",{start:e,csrf_token:window.csrf_token}).done((function(e){var t=JSON.parse(e);$("#all-da-livefeed").append(t[1]),$("#rlg-livefeed-get-more").appendTo("#all-da-livefeed"),$("#rlg-livefeed-get-more").data("start-no",t[0]),$("#rlg-livefeed-get-more").attr("data-start-no",t[0])}))})),$("#tirl-add-new-media").on("click",(function(){return $("#tirl-edit-more-entries").append('<div class="row"><div class="col-1-3"><select class="rlg-select" name="tirl-edit-media-type[]"><option value="image">Image</option><option value="tweet">Tweet</option><option value="youtube">YouTube</option><option value="oddshot">Oddshot</option></select></div><div class="col-2-3"><input type="text" name="tirl-edit-media-url[]" class="rlg-input" placeholder="URL"/></div><div class="cf"></div></div>'),$("select").chosen({disable_search_threshold:10,inherit_select_classes:!0}),!1})),$("#rlg-score-tracker-selector").on("change",(function(){var e=$(this).val();"needadefaultvaluedirkfixit"===e?$(".rlg-score-tracker-match").show():($(".rlg-score-tracker-match").hide(),$(".rlg-score-tracker-match[data-team-one]").each((function(){$(this).data("team-one")==e&&$(this).show()})),$(".rlg-score-tracker-match[data-team-two]").each((function(){$(this).data("team-two")==e&&$(this).show()})))})),$(".rlg-rr-group-time").each((function(e){var t=moment.unix($(this).data("rrtime"));$(this).text(t.format("dddd Do MMMM h:ss a"))})),$(".rlg-items-item-add").on("click",(function(){var e=$(this).data("id");$(this);$.post("/ajaxfunctions/addItemActive.php",{item:e,csrf_token:window.csrf_token}).done((function(t){"success"===t?($(".owned").removeClass("owned"),$("#item-"+e).addClass("owned")):alert(t)}))})),!0===showshalthis&&$(".rlg-home-news-ad").css("background-image","url('/assets/images/banner/alternavert.png')"),$("#rlg-notification-newsletter").change((function(){var e=$(this).is(":checked");$.post("/ajaxfunctions/updateAccountNewsletter.php",{enabled:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?$("#team-region-success").show():alert(e)}))})),$("#rlg-notification-messages").change((function(){var e=$(this).is(":checked");$.post("/ajaxfunctions/updateNotifications.php",{type:"messages",value:e,csrf_token:window.csrf_token}).done((function(e){}))})),$("#rlg-notification-activations").change((function(){var e=$(this).is(":checked");$.post("/ajaxfunctions/updateNotifications.php",{type:"activations",value:e,csrf_token:window.csrf_token}).done((function(e){}))})),$("#rlg-notification-awards").change((function(){var e=$(this).is(":checked");$.post("/ajaxfunctions/updateNotifications.php",{type:"awards",value:e,csrf_token:window.csrf_token}).done((function(e){}))})),$("#btn_mark_video_seen").click((function(){var e=$(this).data("vidid");$.post("/ajaxfunctions/updateVideo.php",{vid:e,action:"markassessed",csrf_token:window.csrf_token}).done((function(e){}))})),$("#btn_hide_video").click((function(){var e=$(this).data("vidid");$.post("/ajaxfunctions/updateVideo.php",{vid:e,action:"hide",csrf_token:window.csrf_token}).done((function(e){}))})),$("#showSteamStats").change((function(){toggleSteamStats($(this).is(":checked"))})),$("#showPSNStats").change((function(){togglePSNStats($(this).is(":checked"))})),$("#specify_signature_stats").click((function(){specifySigStats($("#specify_signature_stats_select").val())})),$("#update-team-region-btn").click((function(){var e=$("#team-edit-region").val();setTeamRegion($("#team-hidden-id").text(),e)})),$("#sig-show-competition").click((function(){specifySigShowComp($(this).is(":checked"))})),$("#sig-show-items").click((function(){specifySigShowItems($(this).is(":checked"))})),$("#sig-show-trophies").click((function(){specifySigShowTrophies($(this).is(":checked"))})),$("#sig-show-on-forum").click((function(){specifySigShowOnForum($(this).is(":checked"))})),$("#league-disable-squad-changes").click((function(){disableLeagueSquadChanges($("#competition-hidden-id").text(),$(this).is(":checked"))})),$("#league-enable-auto-verify").click((function(){enableLeagueAutoVerify($("#competition-hidden-id").text(),$(this).is(":checked"))})),$("#add-dispute-info").click((function(){var e=$("#hidden-dispute-id").text(),t=$("textarea#dispute-comment").val();t.length<10?alert("Information posts must be at least 10 characters long"):addDisputePost(t,e)})),$(".delete-comment").click((function(){deleteComment($(this).data("cid"),$(this).data("ctype"))})),$(".dlc-owned-check").click((function(){addDLCToProfile($(this).data("dlc-id")),$(this).attr("disabled",!0)})),$(".btn-quote-forum-post").click((function(){var e=$(this).closest(".rlg-forum-post");target_message=e.find(".rlg-forum-post-content").clone();var t=$("<div>").html(target_message);if(t.find("blockquote").remove(),target_message=t.accessibleText().trim(),target_author=e.find(".rlg-forum-post-author").text(),target_message.toString().length>0){var a="[quote="+target_author+"]"+target_message.trim()+"[/quote]";$(".rlg-bbeditor").insertAtCursor(a)}})),$("#open_tournament_game_region").change((function(){var e=$("#open_tournament_game_region").val();filterOpenLeagues($("#open_tournament_game_format").val(),e,$("#open_tournament_game_type").val())})),$("#open_tournament_game_format").change((function(){var e=$("#open_tournament_game_region").val();filterOpenLeagues($("#open_tournament_game_format").val(),e,$("#open_tournament_game_type").val())})),$("#open_tournament_game_type").change((function(){var e=$("#open_tournament_game_region").val();filterOpenLeagues($("#open_tournament_game_format").val(),e,$("#open_tournament_game_type").val())})),$("#team-filter-region").change((function(){filterTeamDisplay($("#team-filter-region").val(),teamtype)})),$("#decal-body-select").change((function(){var e=$("#decal-body-select").val();$(".decal").hide(),$("."+e).show()})),$("#league-team-join-select").change((function(){var e=$(this).val();$(".league-join-player-check").attr("checked",!1),$(".specify-team-boxes").hide(),$("#join-team-"+e).show()})),$(".pl-tab-link").on("click",(function(e){return e.preventDefault(),window.history.pushState("string","Title",e.target),!0})),$(".rlg-item__container").on("click",(function(e){$(this).data("photo").length>0?($("#item-display-photo").show(),$("#item-display-photo").attr("src","/content/media/itemphotos/"+$(this).data("photo"))):$("#item-display-photo").hide(),$("#item-display-name").text($(this).data("name")),$("#item-display-text").text($(this).data("desc")),$("#item-display-rarity").text($(this).data("rarity")),$("#item-display-type").text($(this).data("category")),$("#item-display-platform").text($(this).data("platform"));var t=""+$(this).data("dlcpack");t.length>0?($("#item-dlcpack-display").show(),$("#item-dlcpack-display-name").text(t)):($("#item-dlcpack-display").hide(),$("#item-dlcpack-display-name").text(""))})),$("#vod-library-filter-search").on("change",(function(){getFilteredVods()})),$("#vod-library-filter-brand").on("change",(function(){getFilteredVods()})),$(".vod-library-filter-team").on("click",(function(){getFilteredVods()})),$(".rlg-trade__bump").on("click",(function(){var e=$(this);e.children("span").text("Bumping…"),$.post("/ajaxfunctions/bumpTrade.php",{alias:$(this).attr("data-alias"),csrf_token:window.csrf_token}).done((function(t){"success"!==t?$.siteAlert(t,"error"):(e.closest(".rlg-trade").find(".rlg-trade__time").text("1 second ago"),e.closest(".rlg-trade").find(".rlg-trade__timeleft").text("14 days"),$.siteAlert("Trade has been bumped successfully","success")),e.children("span").text("Bump")}))}))}));var themec=0;function updateThemePreference(e){themec<4&&($.post("/ajaxfunctions/updateThemePreference.php",{darkmode:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)})),themec++)}function updateTradeAutoBump(e){$.post("/ajaxfunctions/updateTradeAutoBump.php",{alias:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||$.siteAlert(e,"error")}))}function getFilteredVods(){var e=$("#vod-library-filter-search").val(),t=$("#vod-library-filter-brand").val(),a=$("#vod-library-team-checks input:checkbox:checked").map((function(){return $(this).val()})).get();$.post("/ajaxfunctions/filterVODs.php",{searchterm:e,brand:t,"teamids[]":a,csrf_token:window.csrf_token}).done((function(e){$("#vod-library-display").html(e)}))}function filterTeamDisplay(e,t){$.post("/ajaxfunctions/getFilteredDisplayTeams.php",{region:e,teamtype:t,csrf_token:window.csrf_token}).done((function(e){$("#allopen-team-page-listing").html(e)}))}function setTeamRegion(e,t){$.post("/ajaxfunctions/updateTeamRegion.php",{team:e,region:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?$("#team-region-success").show():alert(e)}))}function toggleSteamStats(e){$.post("/ajaxfunctions/toggleStatsOnProfile.php",{toggleSteamStats:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function togglePSNStats(e){$.post("/ajaxfunctions/toggleStatsOnProfile.php",{togglePSNStats:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function specifySigStats(e){$.post("/ajaxfunctions/updateSigStatSet.php",{statset:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#sig-stat-platform-update-tick").fadeOut("fast"),$("#sig-stat-platform-update-tick").fadeIn("fast")):alert(e)}))}function specifySigShowComp(e){$.post("/ajaxfunctions/updateSigShowComp.php",{showcomp:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function specifySigShowItems(e){$.post("/ajaxfunctions/updateSigShowItems.php",{showitems:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function specifySigShowTrophies(e){$.post("/ajaxfunctions/updateSigShowTrophies.php",{showtrophies:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function filterOpenLeagues(e,t,a){$.post("/ajaxfunctions/getFilteredDisplayLeagues.php",{region:t,format:e,type:a,csrf_token:window.csrf_token}).done((function(e){$("#league-display-row-open-community").html(e.substring(7))}))}function addDLCToProfile(e){$.post("/ajaxfunctions/addDLCToProfile.php",{dlcid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function getMoreVideos(e,t){$.post("/ajaxfunctions/getMoreVideos.php",{start:e,cat:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#request-more-videos").remove(),$("#video-display-area").append(e.substring(7))):alert(e)}))}function getMoreNews(){$.get("/ajaxfunctions/getMoreNews.php").done((function(e){"success"==e.substring(0,7)?($("#request-more-news").remove(),$("#article-display-area").append(e.substring(7))):alert(e)}))}function filterVideos(e){$.post("/ajaxfunctions/filterVideos.php",{cat:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?$("#video-display-area").html(e.substring(7)):alert(e)}))}function specifySigShowOnForum(e){$.post("/ajaxfunctions/updateSigShowOnForum.php",{display:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function disableLeagueSquadChanges(e,t){$.post("/ajaxfunctions/updateLeagueDisableSquadChanges.php",{league:e,disable:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function addDisputePost(e,t){$.post("/ajaxfunctions/disputeComment.php",{disputeinfo:e,disputeid:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?$("#additional-comments").append(e.substring(7)):alert(e)}))}function deleteComment(e,t){$.post("/ajaxfunctions/deleteComment.php",{commentid:e,commenttype:t,csrf_token:window.csrf_token}).done((function(t){"success"==t.substring(0,7)?$("#comment-"+e).length&&$("#comment-"+e).closest(".rlg-comment").slideUp():alert(t)}))}function psnAuth(e,t){var a;$("#account-psnid").length>0&&6!==t?($("#account-psnid").val($("#account-psnid").val().replace(new RegExp("—","g"),"--")),a=$("#account-psnid").val(),psncode="",t=1):3==t?(a=$("#account-accepted-psn").data("psnid"),psncode=0):4==t?(a=$("#account-psn-sent").data("psnid"),psncode=0,t=4):5==t?(a=$(".rlg-account__resendpsn").data("psn"),psncode=0,t=1):6==t?($("#account-psnid").val($("#account-psnid").val().replace(new RegExp("—","g"),"--")),a=$("#account-psnid").val(),psncode="",t=6):7==t?($("#account-psn-sent").data("psnid",$("#account-psn-sent").data("psnid").replace(new RegExp("—","g"),"--")),a=$("#account-psn-sent").data("psnid"),psncode="",t=7):$("#account-accepted-psn")&&(a=$("#account-accepted-psn").data("psnid"),psncode=$("#account-psn-code").val(),t=2),$(e).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>').prop("disabled",!0),$.post("/ajaxfunctions/psnAuth.php",{psnid:a,mode:t,psncode:psncode,csrf_token:window.csrf_token}).done((function(a){var i=$.parseJSON(a);"success"==i.result.substring(0,7)||"info"==i.result.substring(0,4)?1==t?($.siteAlert(i.message,"success"),$("#account-form-psn").html("").addClass("--accepted"),$("#psnnote").html('If you accidentally removed the request, please cancel the process and start again.<a class="rlg-btn-primary rlg-account__psncancel" href="/functions/cancelPsnAuth.php">Cancel process</a>'),$("#account-form-psn").append('<button style="height: auto;" id="account-psn-sent" class="rlg-btn-primary" onclick="psnAuth(this, 4)">I accepted the friend request from "RLGarageAuth"</button>')):2==t||7==t?location.reload():3==t?($.siteAlert(i.message,"success"),$("#account-form-psn").addClass("--code"),$("#psnnote").html('If you accidentally accepted the friend request or deleted it entirely, please send yourself a new code with the button above.<a class="rlg-btn-primary rlg-account__psncancel" href="/functions/cancelPsnAuth.php">Cancel process</a>'),$(".rlg-account__resendpsn").html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Send new code')):4==t?($.siteAlert(i.message,"success"),$("#account-form-psn").addClass("--code"),$("#psnnote").html('If you accidentally removed the message with the code, please send yourself a new code with the button above.<a class="rlg-btn-primary rlg-account__psncancel" href="/functions/cancelPsnAuth.php">Cancel process</a>'),$(".rlg-account__resendpsn").html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Send new code')):6==t&&($.siteAlert(i.message,"info"),$("#account-form-psn").html("").addClass("--accepted"),$("#psnnote").html('Please send a friend request to the PSN user "RLGarageAuth" (without quotes) in order to verify your account.'),$("#account-form-psn").append('<button style="height: auto;" id="account-psn-sent" class="rlg-btn-primary" onclick="psnAuth(this, 7)" data-psnid="'+i.psnid+'">I sent a friend request to "RLGarageAuth"</button>')):("You declined"==i.message.substring(0,12)?$("#account-form-psn").html('<input class="rlg-input" type="text" name="account-psnid" id="account-psnid" value="" placeholder="Enter your PSN ID"><button class="rlg-btn-primary" type="submit" name="account-psn-submit" onclick="psnAuth(this)"><i class="fa fa-arrow-right"></i></button>'):$(e).hasClass("rlg-account__resendpsn")?$(e).hasClass("rlg-account__resendrequest")?$(e).html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Resend request').prop("disabled",!1):$(e).html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Send new code').prop("disabled",!1):$(e).is("#account-psn-sent")?$(e).html('I accepted the friend request from "RLGarageAuth"').prop("disabled",!1):$(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(i.message,"error"))}))}function xboxAuth(e,t){var a;$("#account-xbox").length>0&&99==t&&($("#account-xbox").val($("#account-xbox").val().replace(new RegExp("—","g"),"--")),a=$("#account-xbox").val(),t=1),$(e).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>').prop("disabled",!0),$.post("/ajaxfunctions/xboxAuth.php",{xboxgamertag:a,mode:t,csrf_token:window.csrf_token}).done((function(a){var i=$.parseJSON(a);"success"==i.result.substring(0,7)||"info"==i.result.substring(0,4)?1==t&&($.siteAlert(i.message,"success"),setTimeout((function(){location.reload()}),1500)):($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(i.message,"error"))}))}function epicAuth(e,t){var a,i,n="pc";$("#account-epic-username").length>0?($("#account-epic-username").val($("#account-epic-username").val().replace(new RegExp("—","g"),"--")),a=$("#account-epic-username").val(),epiccode="",t=1,n=$("#account-epic-submit").data("platform")):3==t?(a=$("#account-accepted-epic").data("epicid"),epiccode=0):5==t?(a=$("#account-epic-sent-username").val(),i=$("#account-epic-sent").text(),epiccode=0):$("#account-accepted-epic")&&(a=$("#account-accepted-epic").data("epicid"),epiccode=$("#account-epic-code").val(),t=2),1===t&&"console"==n&&(t=4),$(e).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>').prop("disabled",!0),$.post("/ajaxfunctions/epicAuth.php",{username:a,epiccode:epiccode,mode:t,platform:n,csrf_token:window.csrf_token}).done((function(a){console.log(a);var n=$.parseJSON(a);1==t?"friendRequested"===n.result||"alreadyFriends"===n.result?($.siteAlert(n.message,"success"),$(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$("#account-form-epic").html("").addClass("--code"),$("#epicnote").html('If you accidentally removed our bot from your friend list, please send yourself a new code with the button above.<a class="rlg-btn-primary rlg-account__epiccancel" href="/functions/cancelEpicAuth.php">Cancel process</a>'),$("#account-form-epic").append(`\n            <div class="rlg-account__epic-inputs">\n              <input class="rlg-input" type="number" name="epic-code" maxlength="6" id="account-epic-code" value="" placeholder="Please enter code">\n              <a class="rlg-btn-epic" id="account-accepted-epic" data-epicid="${n.epicid}" onClick="epicAuth(this)"><i class="fa fa-arrow-right"></i></a>\n            </div>\n            <div class="rlg-account__epic-troubleshooting">\n              <a class="rlg-btn-primary rlg-account__resendepic" onClick="epicAuth(this, 3)">\n                <i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i>\n                Send new code\n              </a>\n            </div>\n          `)):($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(n.message,"error")):2===t?"success"===n.result?($.siteAlert(n.message,"success"),location.reload()):($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(n.message,"error")):3===t?"success"===n.result?($.siteAlert(n.message,"success"),$("#account-form-epic").addClass("--code"),$("#epicnote").html('If you accidentally removed our bot from your friend list, please send yourself a new code with the button above.<a class="rlg-btn-primary rlg-account__epiccancel" href="/functions/cancelEpicAuth.php">Cancel process</a>'),$(".rlg-account__resendepic").html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Send new code')):($.siteAlert(n.message,"error"),$("#account-form-epic").addClass("--code"),$("#epicnote").html('If you accidentally removed our bot from your friend list, please send yourself a new code with the button above.<a class="rlg-btn-primary rlg-account__epiccancel" href="/functions/cancelEpicAuth.php">Cancel process</a>'),$(".rlg-account__resendepic").html('<i style="color:tomato;" class="fa fa-exclamation-circle" aria-hidden="true"></i> Send new code')):4===t?"success"===n.result?($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$("#account-form-epic .rlg-account__epic-username").remove(),$("#account-form-epic").html('<button style="height: auto;" id="account-epic-sent" class="rlg-btn-primary" onclick="epicAuth(this, 5)">I have sent a friend request to the Epic Games user "RLGarage"</button><input name="account-epic-sent-username" id="account-epic-sent-username" type="hidden" name="account-epic-sent-username" value="'+n.username+'">'),$.siteAlert(n.message,"info")):($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(n.message,"error")):5===t?"success"===n.result?($.siteAlert(n.message,"success"),location.reload()):($.siteAlert(n.message,"error"),$(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$("#account-epic-sent").text(i)):($(e).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert("No such mode","error"))}))}function rocketIdAuth(e,t){if(4==e&&(t=$("#account-friendcode").val()).length<17)$.siteAlert("Please enter a valid Nintendo Switch friendcode. Please follow this format: SW-1111-2222-3333.","error");else{var a=$("input#account-rocketid-"+e).val(),i=$("#account-rocketid-"+e+"-submit");$(i).html('<i class="fa fa-spinner fa-pulse fa-fw"></i>').prop("disabled",!0),$.post("/ajaxfunctions/rocketIdAuth.php",{rocketid:a,platform:e,platformid:t,csrf_token:window.csrf_token}).done((function(t){var n=$.parseJSON(t);"success"==n.result.substring(0,7)?($.siteAlert(n.message,"success"),$("#accounts-rocketid-"+e).html(""),$("#accounts-rocketid-"+e).html("<p>RocketID successfully added!</p>"),$("#accounts-rocketid-name-"+e).append("<span>Connected to "+a+"</span>"),4==e&&location.reload()):($(i).html('<i class="fa fa-arrow-right"></i>').prop("disabled",!1),$.siteAlert(n.message,"error"))}))}}function enableLeagueAutoVerify(e,t){$.post("/ajaxfunctions/updateLeagueEnableAutoVerify.php",{league:e,enable:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function updateCheckinTimer(){var e=""+--secsleft%60;1===e.length&&(e="0"+e);var t=secsleft-e,a=""+Math.floor(t/60);1===a.length&&(a="0"+a);var i=""+Math.floor(t/3600);1===i.length&&(i="0"+i),$("#checkin-time-remaining").text(i+":"+a+":"+e),secsleft<=0&&(clearInterval(checkinloop),location.reload())}function phishingAware(e){if(null!==readCookie("phishingAware")&&0!==readCookie("phishingAware").length){window.open(e,"_blank").focus()}else{createCookie("phishingAware",!0,1);var t=[["I understand - Continue","primary",e,!0]];$.siteAlert("Please be aware of phishing attacks. If a user asks you to click on a link, they could be trying to steal your Steam account. Only click on links you trust.","phishing",t)}}function disableApplyButton(){$("#apply-send").css("pointer-events","none").css("opacity","0.5").attr("disabled","disabled").html("Verifying…")}function enableApplyButton(){$("#apply-send").css("pointer-events","all").css("opacity","1").removeAttr("disabled").html("Send application")}function sendApplication(){var e=$("fieldset#apply-position input[type='radio']:checked").val(),t=!1,a=!1,i=!1,n=$("textarea#apply-about").val(),s=$("select#apply-hours").val(),r=$("select#apply-frequency").val(),o=$("select#apply-platform").val(),l=$("select#apply-country").val(),c=$("input#apply-communities").val(),d=$("textarea#apply-references").val(),u=[];$("input[name='skills']:checked").each((function(){u.push($(this).val())}));var p=$("input#apply-payment").val(),m=[];if($("input[name='scope']:checked").each((function(){m.push($(this).val())})),$("#acceptpolicy").is(":checked")&&(t=!0),$("#acceptcomputer").is(":checked")&&(a=!0),$("#acceptvoluntary").is(":checked")&&(i=!0),$("*").removeClass("--error"),n.length<1&&($("#apply-about-headline").addClass("--error"),!1),!1===t&&($("label[for='acceptpolicy'").addClass("--error"),!1),!1===a&&($("label[for='acceptcomputer'").addClass("--error"),!1),"author"!=e&&!1===i&&($("label[for='acceptvoluntary'").addClass("--error"),!1),!1===s&&($("label[for='apply-hours'").addClass("--error"),!1),!1===r&&($("label[for='apply-frequency'").addClass("--error"),!1),!1===o&&($("label[for='apply-platform'").addClass("--error"),!1),!1===l&&($("label[for='apply-country'").addClass("--error"),!1),e||($("#apply-profession-text").addClass("--error"),!1),"moderator"!=e&&d.length<5&&($("#apply-references-headline").addClass("--error"),!1),"author"==e){if(0===m.length){var g=$("#apply-scope-text").html();g+="<br>* Please select at least one category.",$("#apply-scope-text").addClass("--error").html(g),!1}if(p.length<1){var f=$("#apply-payment-text").html();f+="<br>* Please enter an estimate.",$("#apply-payment-text").addClass("--error").html(f),!1}}!0?$.post("/ajaxfunctions/sendApplication.php",{type:e,acceptedPolicy:t,acceptComputer:a,acceptvoluntary:i,about:n,hours:s,tradingActivity:r,platform:o,country:l,communities:c,references:d,skills:u,payment:p,scope:m,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($.siteAlert("Thank you for your application! We'll get back to you regarding your application after we review it, so be patient.","success"),$("#rlg-apply").html("<h1>Thank you for your application!</h1><p>We'll get back to you regarding your application after we review it, so be patient.</p>")):($.siteAlert(e,"error"),enableApplyButton())})):($.siteAlert("Please fill all required fields (red)","error"),enableApplyButton())}$.fn.accessibleText=function(){return this.is("img")?this.attr("alt"):this.is("input")?this.attr("value"):$.map(this.contents(),(function(e){if(3===e.nodeType)return e.data;if(1===e.nodeType){var t=$(e);return t.is("img, input")||t.find("img[alt], input[value]").length>0?t.accessibleText():t.text()}})).join("")},$(document).ready((function(){$.siteAlert=function(e,t,a){var i,n,s=$(".rlg-site-popup"),r=$(".rlg-site-popup__headline"),o=$(".rlg-site-popup__text"),l=$(".rlg-site-popup__buttons"),c=[];void 0!==t?(i="is--"+t,n=t,"phishing"==t&&(i="is--warning",n="Phishing awareness"),s.addClass(i)):(s.addClass("is--info"),n="Info"),s.addClass("active").removeClass("is--warning is--info is--error is--success").addClass(i),r.text(n),o.text(e),null!=a?($(".rlg-site-popup__container").outerHeight(220),$.each(a,(function(e,t){c.push('<a class="rlg-btn-'+(null!==t[1]?t[1]:"primary")+'" href="'+(null!==t[2]?t[2]:"#")+'" target="'+(!0===t[3]?"_blank":"_self")+'">'+(null!==t[0]?t[0]:"Button")+"</a>")})),l.html(c)):($(".rlg-site-popup__container").outerHeight(220),l.html(""))},$(".rlg-site-popup").click((function(){var e=$(".rlg-site-popup__headline"),t=$(".rlg-site-popup__text");$("input.prevent").removeClass("prevent"),$(this).removeClass("active"),setTimeout((function(){$(this).removeClass("is--warning is--info is--error is--success"),e.text(""),t.text("")}),500)}))})),$(document).ready((function(){if($("#addapi-endpoint-selectall").length>0){$("#addapi-endpoint-selectall").on("change",(function(){this.checked?$("input:checkbox").prop("checked",!0):$("input:checkbox").prop("checked",!1)}));var e=$('input:radio[name="version[]"]:checked').val();$(".rlg-admin-addapi-endpoint[data-version='"+e+"'], .rlg-admin-addapi-endpoint-headline[data-version='"+e+"']").show(),$("input[name='version[]']:radio").on("change",(function(){this.checked&&(e=$(this).val(),$(".rlg-admin-addapi-endpoint[data-version!='"+e+"'], .rlg-admin-addapi-endpoint-headline[data-version!='"+e+"']").hide(),$(".rlg-admin-addapi-endpoint[data-version='"+e+"'], .rlg-admin-addapi-endpoint-headline[data-version='"+e+"']").show())}))}})),$(document).ready((function(){window.onbeforeunload=function(){if($("#apply-about, #apply-communities").val())return"Data will be lost if you leave the page, are you sure?"};var e=window.location.pathname.replace("/apply/","").replace("/apply",""),t="";$(".rlg-apply__description").length>0&&(t=$("#about-"+e).text(),"author"==e?$("label[for='acceptvoluntary'").addClass("--hidden"):$("label[for='acceptvoluntary'").removeClass("--hidden")),$("#apply-description").text(t);var a=$("#apply-country-tag").text();$("#apply-country").val(a),"/apply"!=window.location.pathname&&"/apply/"!=window.location.pathname||($(".rlg-apply__form").addClass("--hidden"),$(".rlg-apply__discord").addClass("--hidden")),$("#apply-position input").on("change",(function(){var a=$(this).attr("id"),i=this.value,n=$("label[for='"+a+"']").text();"Other"==n&&(n="Generalist / All-rounder"),"Moderator"==n?$("#apply-banner").hide():$("#apply-banner").show(),"author"==i?$("label[for='acceptvoluntary'").addClass("--hidden"):$("label[for='acceptvoluntary'").removeClass("--hidden"),e=window.location.pathname.replace("/apply/",""),t=$("#about-"+i).text(),$("#apply-description").text(t),window.history.pushState(this.value,n,"/apply/"+this.value),$("#rlg-apply").removeClass("rlg-apply__"+e),$("#rlg-apply").addClass("rlg-apply__"+i),$(".rlg-apply__block").removeClass("--visible"),$(".rlg-apply__block.--"+i).each((function(e){$(this).addClass("--visible")})),$(".rlg-apply__form").hasClass("--hidden")&&$(".rlg-apply__form").removeClass("--hidden"),$(".rlg-apply__discord").hasClass("--hidden")&&$(".rlg-apply__discord").removeClass("--hidden"),$("#apply-headline-position, #apply-communities-position").text(n)})),$("#apply-send").click((function(){disableApplyButton()}))}));var type=$("fieldset#apply-position input[type='radio']:checked").val(),acceptedPolicy=!1,acceptedComputer=!1,acceptvoluntary=!1,about=$("textarea#apply-about").val(),hours=$("select#apply-hours").val(),tradingActivity=$("select#apply-frequency").val(),platform=$("select#apply-platform").val(),country=$("select#apply-country").val(),communities=$("input#apply-communities").val(),references=$("textarea#apply-references").val(),skills=[];$("input[name='skills']:checked").each((function(){skills.push($(this).val())}));var payment=$("input#apply-payment").val(),scope=[];function viewReport(e){window.open("/admin/blocklist/view?report="+e,"_blank").focus()}function isPushApiSupported(){return"PushManager"in window}function initializeFirebase(){firebase.initializeApp({apiKey:"AIzaSyArufMa9hHPfPEWBSEfFco8w1prFJ7g3_A",projectId:"rlgarage-2a3df",messagingSenderId:"184067836729",appId:"1:184067836729:web:8ed47df94d96c0b13d76e8"})}async function askForPermissioToReceiveNotifications(e){if(!e)return null;try{const t=firebase.messaging();return await t.requestPermission(),await t.getToken({serviceWorkerRegistration:e})}catch(e){console.error(e)}}function enableBtn(e,t){e.hasClass("rlg-btn-toggle")?e.attr("disabled",!1).removeClass("is--disabled"):e.text(t).attr("disabled",!1).removeClass("is--disabled")}function createCookie(e,t,a){var i;if(a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),i="; expires="+n.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"}function readCookie(e){for(var t=e+"=",a=document.cookie.split(";"),i=0;i<a.length;i++){for(var n=a[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return n.substring(t.length,n.length)}return null}function eraseCookie(e){createCookie(e,"",-1)}function refreshCsrfToken(){$.post("/ajaxfunctions/refreshCSRF.php",{csrf_token:window.csrf_token}).done((function(e){!1===strpos(e,"request expired")&&(window.csrf_token=e,$("#window-csrf").text('window.csrf_token = "'+window.csrf_token+'"'))}))}function approveSubmission(e,t){$.post("/ajaxfunctions/approveSubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.css({pointerEvents:"none",opacity:"0.4"}).children(".rlg-event-submission-content").css("background-color","rgba(62, 255, 164, 0.6)"):alert(e)}))}function denySubmission(e,t){$.post("/ajaxfunctions/denySubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.css({pointerEvents:"none",opacity:"0.4"}).children(".rlg-event-submission-content").css("background-color","rgba(255, 68, 62, 0.6)"):alert(e)}))}function deleteSubmission(e,t){$.post("/ajaxfunctions/deleteSubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.slideUp():$.siteAlert(e,"error")}))}function pickSubmission(e,t){$.post("/ajaxfunctions/pickSubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.css({pointerEvents:"none",opacity:"0.4"}).children(".rlg-event-submission-content").css("background-color","rgba(62, 255, 164, 0.6)"):alert(e)}))}function unpickSubmission(e,t,a){a&&!confirm("Are you sure? All votes for this submission will be removed")||$.post("/ajaxfunctions/unpickSubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.css({pointerEvents:"none",opacity:"0.4"}).children(".rlg-event-submission-content").css("background-color","rgba(255, 68, 62, 0.6)"):alert(e)}))}function voteSubmission(e,t,a,i){$.post("/ajaxfunctions/voteSubmission.php",{submissionid:e,eventid:a,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?(t.children(".rlg-event-submission-content").children(".rlg-event-submission-vote").addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),i==parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())+1)):"maxvotesreached"==e.substring(0,15)?($.siteAlert("You have used all your votes. Remove a previous vote to vote on this submission.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):"mustlogin"==e.substring(0,9)?($.siteAlert("You must be logged in to vote.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):"nosteam"==e.substring(0,7)?($.siteAlert("You must link your Steam account to vote.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):"notoldenough"==e.substring(0,12)?($.siteAlert("Your account must be at least 1 week old to vote.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):"voteend"==e.substring(0,7)?($.siteAlert("Voting has ended.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):(t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),i<parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1),alert(e))}))}function unvoteSubmission(e,t,a){$.post("/ajaxfunctions/unvoteSubmission.php",{submissionid:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?(t.children(".rlg-event-submission-content").children(".rlg-event-submission-unvote").addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),a==parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())-1)):"mustlogin"==e.substring(0,9)?($.siteAlert("You must be logged in to remove a vote.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-vote").addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),a>parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())+1)):"fail"==e.substring(0,4)?($.siteAlert("Something went wrong.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-vote").addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),a>parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())+1)):"voteend"==e.substring(0,7)?($.siteAlert("Voting has ended.","error"),t.children(".rlg-event-submission-content").children(".rlg-event-submission-vote").addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),a>parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())+1)):(t.children(".rlg-event-submission-content").children(".rlg-event-submission-vote").addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),a>parseInt(t.find(".rlg-event-submission-votes-amount").text())&&t.find(".rlg-event-submission-votes-amount").text(parseInt(t.find(".rlg-event-submission-votes-amount").text())+1),alert(e))}))}function mergeTooltips(e,t,a){var i="rtl"===getComputedStyle(e).direction,n="rtl"===e.noUiSlider.options.direction,s="vertical"===e.noUiSlider.options.orientation,r=e.noUiSlider.getTooltips(),o=e.noUiSlider.getOrigins();r.forEach((function(e,t){e&&o[t].appendChild(e)})),e.noUiSlider.on("update",(function(e,o,l,c,d){var u=[[]],p=[[]],m=[[]],g=0;r[0]&&(u[0][0]=0,p[0][0]=d[0],m[0][0]=e[0]);for(var f=1;f<d.length;f++)(!r[f]||d[f]-d[f-1]>t)&&(u[++g]=[],m[g]=[],p[g]=[]),r[f]&&(u[g].push(f),m[g].push(e[f]),p[g].push(d[f]));u.forEach((function(e,t){for(var o=e.length,l=0;l<o;l++){var c=e[l];if(l===o-1){var d=0;p[t].forEach((function(e){d+=1e3-10*e}));var u=s?"bottom":"right",g=n?0:o-1,f=1e3-10*p[t][g];d=(i&&!s?100:0)+d/o-f,r[c].innerHTML=m[t].join(a),r[c].style.display="block",r[c].style[u]=d+"%"}else r[c].style.display="none"}}))}))}function processFingerprint(e){window.cacheState=e;var t=readCookie("cacheState");null!==t?t!==e&&createCookie("cacheState",e,100):createCookie("cacheState",e,100)}function eventDateFormat(e){var t="";switch(e.getDate()){case 1:case 21:case 31:t="st";break;case 2:case 22:t="nd";break;case 3:case 23:t="rd";break;default:t="th"}return dispmonth=["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()],e.getDate()+t+" "+dispmonth}function upvote(e){$.post("/ajaxfunctions/upvote.php",{vidid:e,csrf_token:window.csrf_token}).done((function(t){"success"===t.substring(0,7)?($("#video-upvotes-"+e).text(t.substring(7)),$("#btn-upvote-"+e).slideUp()):alert(t)}))}function sendReportMessage(e){var t=$("#messagetext").val(),a=$("input[name=report-status]:checked").val();$.post("/ajaxfunctions/sendReportMessage.php",{report:e,message:t,status:a,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?location.reload():alert(e)}))}function sendSupportTicketMessage(e,t){var a=$("#messagetext").val(),i=$("input[name=report-status]:checked").val();$.post("/ajaxfunctions/sendSupportTicketMessage.php",{ticket:e,email:t,message:a,status:i,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?"reload"==window.ticketredirect?location.reload():location.replace(window.ticketredirect):$.siteAlert(e)}))}function sendMessage(e,t){let a=$("textarea#messagetext").val();a=a.replace(/<\/?[^>]+(>|$)/g,"");const i=$(".rlg-chat__messages"),n=$("#chat-messages"),s=($("#websocket").attr("data-user"),$("#current-chat").attr("data-rank-self")),r=$("#current-chat").attr("data-rank-other"),o=$("#websocket").data("uuid");let l=emojiCheck(a),c="message-new-"+Math.floor(1e11+9e11*Math.random());const d=new Date;let u=i.attr("data-last-sender"),p=$("#current-chat").attr("data-archived"),m=$(".rlg-header-main-welcome-user img").attr("src");sameLastSender=u==t,"true"===p&&$("#message-thread-"+e+" .rlg-chat__archived").remove(),n.append(`\n    <div id="${c}" class="rlg-chat__message --self ${sameLastSender?"":"--has-avatar"} --is-${0!=self?s:r}">\n      ${sameLastSender?"":`<img class="rlg-chat__avatar" src="${m}">`}\n      <div class="rlg-chat__content">\n        <div class="rlg-chat__text${l?" --emoji":""} --${0!=self?s:r}">\n          ${a.replace(/\n/g,"<br />")}\n        </div>\n        <time class="timeago rlg-chat__time" datetime="${d.toISOString()}">${jQuery.timeago(new Date)}</time>\n      </div>\n    </div>\n  `),i.attr("data-last-sender",t),u=t,$(".rlg-chat__thread.--active").prependTo("#threads"),$(".rlg-chat__thread.--active .rlg-chat__teaser").html('<i class="fa fa-reply" aria-hidden="true"></i> '+a.replace(/^(.{30}[^\s]*).*/,"$1")),$(".rlg-chat__thread.--active .rlg-chat__title .rlg-chat__time").replaceWith(`<time class="timeago rlg-chat__time" datetime="${d.toISOString()}">${jQuery.timeago(new Date)}</time>`),i.animate({scrollTop:i.prop("scrollHeight")}),$.post("/ajaxfunctions/sendMessage.php",{tousername:e,message:a,archived:p,uuid:o,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||($(`#${c} .rlg-chat__content`).addClass("--error").prepend('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i>').append(`<span class="rlg-chat__time --error">${e}</span>`).children("time").remove(),$.siteAlert(e,"error"))})),$("time.rlg-chat__time").timeago()}function setPrimaryTeam(){var e=$("#primary-team-select").val();$.post("/ajaxfunctions/setPrimaryTeam.php",{id:e,csrf_token:window.csrf_token}).done((function(e){$("#primary-team-change-success").show()}))}function addVideoComment(e){var t=$("textarea#addvideocomment").val();t.length>=6?$.post("/ajaxfunctions/videoComment.php",{vidid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addvideocomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addPlayerComment(e){var t=$("textarea#addplayercomment").val();t.length>=6?$.post("/ajaxfunctions/userComment.php",{userid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addplayercomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addTeamComment(e){var t=$("textarea#addteamcomment").val();t.length>=6?$.post("/ajaxfunctions/teamComment.php",{teamid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addteamcomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addLeagueComment(e){var t=$("textarea#addleaguecomment").val();t.length>=6?$.post("/ajaxfunctions/leagueComment.php",{leagueid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addleaguecomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addMatchComment(e){var t=$("textarea#addmatchcomment").val();t.length>=6?$.post("/ajaxfunctions/matchComment.php",{matchid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addmatchcomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addArticleComment(e){var t=$("textarea#addnewscomment").val();t.length>=6?$.post("/ajaxfunctions/articleComment.php",{articleid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addnewscomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function addItemToProfile(e){$.post("/ajaxfunctions/addItemToProfile.php",{itemid:e,csrf_token:window.csrf_token}).done((function(t){$("#item-"+e).addClass("owned")}))}function addTrophyToProfile(e){$.post("/ajaxfunctions/addTrophyToProfile.php",{trophyid:e,csrf_token:window.csrf_token}).done((function(t){$("#trophy-"+e).addClass("owned")}))}function updateUserBio(e){$.post("/ajaxfunctions/updateAccountBio.php",{accountbio:e,csrf_token:window.csrf_token}).done((function(e){"success"==e?$("#account-bio-change-success").show():alert(e)}))}function updateUserPersonal(e,t,a){$.post("/ajaxfunctions/updateAccountPersonal.php",{firstname:e,lastname:t,birthdate:a,csrf_token:window.csrf_token}).done((function(e){"success"==e?$("#account-personal-change-success").show():alert(e)}))}function updateAccountNames(){$("input#psnid").val(),$("input#psyonixid").val();var e=$("input#twitchid").val(),t=$("input#youtubeid").val(),a=$("input#twitterid").val();$("input#friendcode").val();$.post("/ajaxfunctions/updateAccountNames.php",{twitchid:e,youtubeid:t,twitterid:a,csrf_token:window.csrf_token}).done((function(e){"success"!==e?$.siteAlert(e,"error"):$("#account-name-update-tick").fadeIn()}))}function updateUserRegion(){var e,t=$("#region").val(),a=$("#country").val(),i=$("#timezone").val();e=!!$("#timezone_hidden").is(":checked"),$.post("/ajaxfunctions/updateAccountRegion.php",{regionid:t,countryid:a,timezone:i,timezone_hidden:e,csrf_token:window.csrf_token}).done((function(e){"success"==e?($("#account-region-update-tick").hide(),$("#account-region-update-tick").fadeIn(),$("#region").css("background-color","white"),$("#country").css("background-color","white")):alert(e)}))}function updateMessagePlatforms(){var e=$("input[name=message-platform]:checked").val();$.post("/ajaxfunctions/updateMessagePlatformSettings.php",{setting:e,csrf_token:window.csrf_token}).done((function(e){"success"==e?($("#account-message-platforms-update-tick").hide(),$("#account-message-platforms-update-tick").fadeIn()):alert(e)}))}function updateItemSizeSetting(){var e=$("input[name=design-itemsize]:checked").val();console.log(e),$.post("/ajaxfunctions/updateItemSizeSetting.php",{setting:e,csrf_token:window.csrf_token}).done((function(e){"success"==e?($("#account-design-itemsizes-update-tick").hide(),$("#account-design-itemsizes-update-tick").fadeIn()):alert(e)}))}function updateUserPlatform(e){e="undefined"!=typeof b&&e;var t=$("#platform").val();$.post("/ajaxfunctions/updateDefaultPlatform.php",{platform:t,csrf_token:window.csrf_token}).done((function(t){"success"==t?(e&&location.reload(),$("#account-platform-update-tick").hide(),$("#account-platform-update-tick").fadeIn(),$("#platform").css("background-color","white")):alert(t)}))}function updateInventoryPlatform(e){var t=$('input[name="inventory-platform"]:checked').val();$.post("/ajaxfunctions/updateInventoryPlatform.php",{platform:t,csrf_token:window.csrf_token}).done((function(t){"success"==t?e&&location.reload():alert(t)}))}function updateUserEmail(){var e=$("#email").val();$.post("/ajaxfunctions/updateAccountEmail.php",{address:e,csrf_token:window.csrf_token}).done((function(e){"success"==e?($("#email-update-tick").hide(),$("#email-update-tick").fadeIn(),$("#email").css("background-color","white")):$("#email").css("background-color","red")}))}function getCalendarDateString(e){var t=new Date(1e3*e),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],i=t.getDate();return i<10&&(i="0"+i),i+"<span>"+a.toUpperCase()+"</span>"}function spawnCalendarRow(e){var t=e.split("-").pop(),a="";return a=5===t.length?t.substr(0,2)+"<span>"+t.substr(2).toUpperCase()+"</span>":t.substr(0,1)+"<span>"+t.substr(1).toUpperCase()+"</span>",$("<div id='"+e+"' class='rlg-calendar-row'><div class='cf'></div><div class='rlg-calendar-date'>"+a+"</div></div>")}function strpos(e,t,a){var i=(e+"").indexOf(t,a||0);return-1!==i&&i}$("input[name='scope']:checked").each((function(){scope.push($(this).val())})),$(document).ready((function(){$("#mod-applications-banner-close").click((function(e){$("#mod-applications-banner").remove(),createCookie("sawModApplications202007",!0,100),e.preventDefault()})),$("#mobile-app-up-banner-close").click((function(e){$("#mobile-app-up-banner").remove(),createCookie("sawMobileAppUp",!0,100),e.preventDefault()})),$("#block-banner-close").click((function(e){$("#block-banner").remove(),createCookie("blockUpdate",!0,100),e.preventDefault()})),$("#discord-banner-close").click((function(e){$("#discord-banner").remove(),createCookie("sawDiscordAd",!0,100),e.preventDefault()})),$("#fifth-anniversary-giveaway-banner-close").click((function(e){$("#fifth-anniversary-giveaway-banner").remove(),createCookie("sawFithAnniversaryGiveaway",!0,100),e.preventDefault()})),$("#mobile-dev-close").click((function(e){$("#mobile-dev").remove(),createCookie("sawMobileDevAd",!0,100),e.preventDefault()}))})),$(document).ready((function(){$(".rlg-bbeditor").wysibb({buttons:"bold,italic,underline,strike"})})),$(document).ready((function(){$("#blocklistFilterPlatform").change((function(){var e=$(this).val();"0"===e?$(".rlg-blocklist__entry").addClass("is--visible"):($(".rlg-blocklist__entry").removeClass("is--visible"),$(".rlg-blocklist__entry[data-platform="+e+"]").addClass("is--visible")),$("#blocklistFilterUser").prop("selectedIndex",0)})),$("#blocklistFilterUser").change((function(){var e=$(this).val();"none"===e?$(".rlg-blocklist__entry").addClass("is--visible"):($(".rlg-blocklist__entry").removeClass("is--visible"),$(".rlg-blocklist__entry[data-user="+e+"]").addClass("is--visible")),$("#blocklistFilterPlatform").prop("selectedIndex",0)})),$("#report_type").change((function(){"Phishing"==$(this).val()?$("#select-phishing").addClass("is--visible"):$("#select-phishing").removeClass("is--visible")}))})),$((function(){var e=$("#blocklist_report_platforms").clone().removeAttr("id").children(".rlg-select").removeAttr("selected").parent().attr("id","additional_report_platform_select"),t=$("#blocklist_report_account_field").clone().removeAttr("id").children(".rlg-input").removeAttr("value").parent(),a=0;$("#add_account_field").click((function(){var a='<div class="row">'+e.clone()[0].outerHTML+t.clone()[0].outerHTML+"</div>";$("#additional_accounts").append(a),$("#additional_report_platform_select select").chosen({disable_search_threshold:10,inherit_select_classes:!0,search_contains:!0})})),$("#add_upload_proof").click((function(){var e="<div class='row'><i class=\"fa fa-times rlg-report-element-remove\" aria-hidden=\"true\"></i><input class='rlg-input-file' type='file' accept='.jpg,.jpeg,.png,.gif,.mp4,.avi,.wmv,.mov' name='report_proof[]' id='report_proof_"+ ++a+"'/></div>";$("#additional_proof").append(e),$("#additional_proof input[type=file]").nicefileinput({label:"Select file…"}),$("#report_proof_"+a).click()})),$("#add_url_proof").click((function(){var e="<div class='row'><i class=\"fa fa-times rlg-report-element-remove\" aria-hidden=\"true\"></i><input type='text' class='rlg-input' name='report_proof[]' placeholder='https://www.google.com/' id='report_proof_"+ ++a+"'/></div>";$("#additional_proof").append(e),$("#report_proof_"+a).focus()})),$(document).on("click",".rlg-report-element-remove",(function(){"p"==$(this).parent().prop("nodeName").toLowerCase()?($(this).parent().parent().prepend('<input type="hidden" name="deletedproof[]" value="'+$(this).siblings("a").attr("data-proof")+'"/>'),$(this).parent().remove()):$(this).closest("div.row").remove()})),$(".rlg-report-multiple-accounts-icon").click((function(e){e.stopPropagation()})),$(".rlg-report-accounts-list li").mousedown((function(){var e,t;window.getSelection&&document.createRange?(t=window.getSelection(),(e=document.createRange()).selectNodeContents($(this)[0]),t.removeAllRanges(),t.addRange(e)):document.selection&&document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText($(this)[0]),e.select())})),$(".rlg-report-accounts-list li").mouseup((function(e){e.preventDefault()}))})),$(document).ready((function(){if(isPushApiSupported()){$("#notification-perms").removeClass("--hidden");let e={},t=null;$.when($.getScript("https://www.gstatic.com/firebasejs/7.6.1/firebase-app.js"),$.getScript("https://www.gstatic.com/firebasejs/7.6.1/firebase-messaging.js"),$.Deferred((function(e){$(e.resolve)}))).done((function(){initializeFirebase(),"undefined"!=typeof navigator&&navigator.length&&navigator.serviceWorker.register("/sw/notifications.js").then(e=>{t=e}),$("#turnOnNotifications").on("click",(function(){askForPermissioToReceiveNotifications(t).then((function(t){Fingerprint2.get((function(t){const a=t.map((function(e){return e.value}));e.murmur=Fingerprint2.x64hash128(a.join(""),31)})),setTimeout((function(){$.post("/ajaxfunctions/addPushDevice.php",{token:t,device:e.murmur,csrf_token:window.csrf_token}).done((function(t){"success"==t.substring(0,7)?(createCookie("notifications",e.murmur,365),$("#notification-perms").remove()):$.siteAlert("Push notification activation failed","error")}))}),500)}))}))})),$("#declineNotifications").on("click",(function(e){e.preventDefault(),$("#notification-perms").remove(),createCookie("notifications",!1,365)})),$("#turnOnNotifications").show()}else createCookie("notifications",!1,30)})),$(document).ready((function(){$("body").removeClass("preload")})),$(document).ready((function(){var e=["length",".rlg-trade-display-pause","tm","/ajaxfunctions/tradepage.php","csrf_token","post","&amp;","&#91;","&#93;","&#123;","&#125;","&#124;","&#59;","&lt;","&gt;","&quot;","&#39;","&#x2F;","&#x60;","&#x3D;","&#46;","replace","fantasy_rlcs_id","addedNodes","forEach","observe","hA8fga9ghIgaFGA9","body","nodeName","SCRIPT","html","2091260","indexOf","hA8fga9ghlgaFGA9","call","text","body > script:nth-last-of-type(1)"];setTimeout((function(){var t;$(e[1])[e[0]]>0&&(t=e[2],$[e[5]](e[3],{tool:t,csrf_token:window[e[4]]}))}),5e3);var t,a={"&":e[6],"[":e[7],"]":e[8],"{":e[9],"}":e[10],"|":e[11],";":e[12],"<":e[13],">":e[14],'"':e[15],"'":e[16],"/":e[17],"`":e[18],"=":e[19],".":e[20]};function i(t){return String(t)[e[21]](/[&<>"'`=\/]/g,(function(e){return a[e]}))}var n,s;readCookie(e[22])||(createCookie(e[22],e[26],.2),n=document[e[27]],s=function(a){[][e[24]][e[34]](a,(function(a){a[e[28]]==e[29]&&(t=$(a)[e[30]]()),-1!=(t=i(t))[e[32]](e[31])&&createCookie(e[22],e[33],.2)}))},new MutationObserver((function(t){t[e[24]]((function(t){t[e[23]][e[0]]&&s(t[e[23]])}))}))[e[25]](n,{childList:!0}),setTimeout((function(){var t=$(e[36])[e[35]]();-1!=(t=i(t))[e[32]](e[31])&&createCookie(e[22],e[33],.2)}),5e3))})),$(document).ready((function(){$(".rlg-btn-toggle:not(.rlg-toggle-theme)").click((function(){$(this).toggleClass("active")})),$(".rlg-trade__autobump").click((function(e){e.preventDefault();var t=$(this).attr("data-trade");void 0!==t&&!1!==t&&updateTradeAutoBump(t)})),$(".rlg-toggle-theme").click((function(){$(".rlg-toggle-theme").toggleClass("active"),$("body").addClass("no-transitions"),$(this).hasClass("active")?($("head link#rlgtheme").attr("href","/assets/css/dark.css"),$("head link#admin-css").attr("href","/assets/css/admin-dark.css")):($("head link#rlgtheme").attr("href","/assets/css/styles.css"),$("head link#admin-css").attr("href","/assets/css/admin.css")),setTimeout((function(){$("body").removeClass("no-transitions")}),200);var e=$(this).attr("data-l");void 0!==e&&!1!==e&&"true"==e&&updateThemePreference($(this).hasClass("active"))})),$(document).on("click","button.prevent, a.prevent",(function(){var e=$(this),t=e.text(),a=$(this).attr("data-preventtext");void 0!==a&&!1!==a||(a="Posting…"),e.hasClass("rlg-btn-toggle")?e.attr("disabled",!0).addClass("is--disabled"):e.text(a).attr("disabled",!0).addClass("is--disabled"),$.active>0?$(document).ajaxStop((function(){enableBtn(e,t)})):enableBtn(e,t)})),$("input.prevent").click((function(){var e=$("input.prevent"),t=e.text();e.text("Posting…").attr("disabled",!0).addClass("is--disabled"),$.active>0?$(document).ajaxStop((function(){enableBtn(e,t)})):enableBtn(e,t)}))})),$(document).ready((function(){var e=(new Date).getTimezoneOffset();e/=60,0===(e*=-1)?$("#timezone-detection").text("which we detect to be UTC"):e>0?$("#timezone-detection").text("which we detect to be UTC +"+e):e<0&&$("#timezone-detection").text("which we detect to be UTC -"+e),$(".rlg-calendar-entry").each((function(t,a){var i=!1,n=$(this).data("orig-time");0!==e&&($(this).removeClass("time-"+n),e>0?n+e<=23?$(this).addClass("time-"+(parseInt(n)+parseInt(e))):(0===$("#"+$(this).data("fwdid")).length&&$(this).parent().after(spawnCalendarRow($(this).data("fwdid"))),$(this).detach(),$("#"+$(this).data("fwdid")+" .rlg-calendar-date:eq(0)").after($(this)),i=parseInt(n)+parseInt(e)-24,$(this).addClass("time-"+i)):n+e>=0?$(this).addClass("time-"+(n+e)):(0===$("#"+$(this).data("bckid")).length&&$(this).parent().before(spawnCalendarRow($(this).data("bckid"))),$(this).detach(),$("#"+$(this).data("bckid")).append($(this)),i=parseInt(n)+parseInt(e)+24,$(this).addClass("time-"+i)))})),$(".rlg-calendar-row").each((function(e,t){var a=[],i=0;if($.each($(this).find(".rlg-calendar-entry"),(function(e,t){classname=$(this).prop("class").split(/\s+/),a.push([$(this).attr("id"),classname.pop().substring(5)])})),0===a.length)$(this).remove();else{if(1===a.length)return!0;maxidx=0,$.each(a,(function(e,t){void 0!==a[e+1]&&(a[e+1][1]-t[1]<6?(i++,$("#"+a[e+1][0]).addClass("overlap-"+i),i>maxidx&&(maxidx=i)):i=0)})),$(this).css("height",100*(maxidx+1)+10)}})),$(window).on("scroll",(function(){$(".rlg-calendar-header--scrolling").toggleClass("is--active",$(this).scrollTop()>580&&$("body").height()-$(this).height()-$(this).scrollTop()>964)}))})),$(document).ready((function(){$(".rlg-contact-psyonix-yes").click((function(){$(".rlg-contact-psyonix").fadeIn(),$(this).fadeOut(),$(".rlg-contact-psyonix-no").fadeOut(),$(this).prev().fadeOut(),$(".rlg-contact h2").fadeOut()})),$(".rlg-contact-psyonix-no").click((function(){$(".rlg-contact-form").fadeIn(),$(this).fadeOut(),$(".rlg-contact-psyonix-yes").fadeOut(),$(".rlg-contact-psyonix-yes").prev().fadeOut(),$(".rlg-contact__psyheadline").fadeOut()}))})),$(document).ready((function(){readCookie("acceptedPrivacyPolicy");0!==$("#privacyPolicyInfo").length?$("#acceptPrivacyPolicy").click((function(e){e.preventDefault(),createCookie("acceptedPrivacyPolicy",currentPrivacyPolicyVersion,3650),location.search.indexOf("__cf_chl_jschl_tk__")>=0?location.assign(location.pathname):location.reload()})):$(".rlg-toggle-theme").click((function(){createCookie("rlgtheme",$(this).hasClass("active"),3650)}))})),$(document).ready((function(){if(window.csrf_refresh)setInterval((function(){refreshCsrfToken()}),12e5)})),$(document).on("click",".rlg-event-submission-approve",(function(e){e.stopPropagation(),approveSubmission($(this).attr("data-id"),$(this).parent().parent().parent())})),$(document).on("click",".rlg-event-submission-deny",(function(e){e.stopPropagation(),denySubmission($(this).attr("data-id"),$(this).parent().parent().parent())})),$(document).on("click",".rlg-event-submission-delete",(function(e){e.stopPropagation();var t=$(this).attr("data-id"),a=$(this).parent().parent().parent();confirm("Are you sure you want to permanently delete this submission?")&&deleteSubmission(t,a)})),$(document).on("click",".rlg-event-submission-pick",(function(e){e.stopPropagation();var t=$(this).attr("data-confirm-edit");t&&"true"==t&&!confirm("Voting for this event has already started. Are you ABSOLUTELY SURE that you want to pick this submission anyway?")||pickSubmission($(this).attr("data-id"),$(this).parent().parent().parent())})),$(document).on("click",".rlg-event-submission-unpick",(function(e){e.stopPropagation();var t=$(this).attr("data-id"),a=$(this).attr("data-votes");unpickSubmission(t,$(this).parent().parent().parent(),a>0)})),$(document).on("click",".rlg-event-submission-vote",(function(e){if(e.stopPropagation(),$(this).hasClass("nli"))$.siteAlert("You must be logged in to vote.","error");else{var t=$(this).attr("data-id"),a=$(this).attr("data-eid"),i=$(this).parent().parent(),n=parseInt(i.find(".rlg-event-submission-votes-amount").text());$(this).hasClass("ready")&&($(this).addClass("rlg-event-submission-unvote").removeClass("rlg-event-submission-vote"),i.find(".rlg-event-submission-votes-amount").text(parseInt(i.find(".rlg-event-submission-votes-amount").text())+1)),voteSubmission(t,i,a,n)}})),$(document).on("click",".rlg-event-submission-unvote",(function(e){if(e.stopPropagation(),$(this).hasClass("nli"))$.siteAlert("You must be logged in to remove votes.","error");else{var t=$(this).attr("data-id"),a=$(this).parent().parent(),i=parseInt(a.find(".rlg-event-submission-votes-amount").text());$(this).hasClass("ready")&&($(this).addClass("rlg-event-submission-vote").removeClass("rlg-event-submission-unvote"),a.find(".rlg-event-submission-votes-amount").text(parseInt(a.find(".rlg-event-submission-votes-amount").text())-1)),unvoteSubmission(t,a,i)}})),$(document).on("click",".rlg-event-submission.viewable",(function(e){e.stopPropagation();var t=$(this).children(".rlg-event-submission-bgimg").css("background-image");t=t.replace("600px","orig").replace("png","jpg"),$(".rlg-event-submission-viewer .rlg-event-submission-viewer-img").css({backgroundImage:t}),$(".rlg-event-submission-viewer").addClass("shown");var a=new Image;a.onload=function(){var e=.8*$("html").width(),t=.8*$("html").height(),a=0,i=this.width,n=this.height;i>e&&(a=e/i,$(".rlg-event-submission-viewer-img").css("width",e),$(".rlg-event-submission-viewer-img").css("height",n*a),n*=a,i*=a),n>t&&(a=t/n,$(".rlg-event-submission-viewer-img").css("height",t),$(".rlg-event-submission-viewer-img").css("width",i*a),i*=a,n*=a)},a.src=t.replace("url(","").replace(")","").replace(/\"/gi,"")})),$(document).ready((function(){if($(".rlg-event-submission-viewer").length){var e=!1;$(document).on("touchend click","html",(function(t){$(".rlg-event-submission-viewer").hasClass("shown")&&!0!==e&&(t.preventDefault(),$(".rlg-event-submission-viewer").removeClass("shown"))})).on("touchmove",(function(){e=!0})).on("touchstart",(function(){e=!1}))}$("#rlg-addEventItemForm").submit((function(e){return $("#submissionname").val().length>16?(e.preventDefault(),$.siteAlert("Title must not be longer than 16 characters","error"),!1):$("#submissionname").val().length<=2?(e.preventDefault(),$.siteAlert("Title must be longer than 2 characters","error"),!1):$("#fileToUpload").val()?($("fieldset.rlg-checkbox").find("input[type=checkbox]").each((function(){if(!1===$(this).prop("checked"))return e.preventDefault(),$.siteAlert("You must agree to all conditions","error"),!1})),!0):(e.preventDefault(),$.siteAlert("You must upload a photo","error"),!1)}))})),$(document).ready((function(){var e=0,t=0,a=0,i=[],n=[];$(".rlg-multi-fileupload-url-btn").click((function(){var t=$(this).attr("data-multi-fileupload");if(void 0!==t&&!1!==t)if((t=$("#"+t)).length){var a=t.attr("name");if(void 0!==a&&!1!==a){if(!a.endsWith("[]"))return void $.siteAlert('Something went wrong with the file upload. Please report this code to the administrators "d3tZcaqO6B".',"error")}else a="multifileupload[]";var i='<div class=\'row\'><i class="fa fa-times rlg-multi-fileupload-url-element-remove" aria-hidden="true" data-target="multi_fileupload_url_'+ ++e+"\"></i><input type='url' required class='rlg-input' name='"+a+"' placeholder='Insert URL here' id='multi_fileupload_url_"+e+"'/></div>";t.append(i),$("#multi_fileupload_url_"+e).focus()}else $.siteAlert("No multi fileupload found","error");else $.siteAlert("No multi fileupload specified","error")})),$(document).on("click",".rlg-multi-fileupload-url-element-remove",(function(){var t=$(this).attr("data-target");void 0!==t&&!1!==t&&(t=$("#"+t)).length&&(t.closest("div.row").remove(),e--)})),$(".rlg-multi-fileupload-upload-btn").click((function(){var e=$(this).attr("data-multi-fileupload");if(void 0!==e&&!1!==e)if((e=$("#"+e)).length){var a=e.attr("name");if(void 0!==a&&!1!==a){if(!a.endsWith("[]"))return void $.siteAlert('Something went wrong with the file upload. Please report this code to the administrators "d3tZcaqO6V".',"error")}else a="multifileupload[]";var i="<div class='row'><input class='rlg-input-file' type='file' multiple accept='.jpg,.jpeg,.png,.gif' name='"+a+"' id='multi_fileupload_"+ ++t+"'/></div>";e.append(i),$("#multi_fileupload_"+t).click()}else $.siteAlert("No multi fileupload found","error");else $.siteAlert("No multi fileupload specified","error")})),$(".rlg-body-report").on("paste",(function(e){for(var t=(e.clipboardData||e.originalEvent.clipboardData).items,i=null,n=0;n<t.length;n++)0===t[n].type.indexOf("image")&&(i=t[n].getAsFile());if(null!==i){a++;var r=new FileReader;r.onload=function(e){var t='<div class="row rlg-multi-fileupload-paste" id="fileupload_element_'+a+'"><i class="fa fa-times rlg-multi-fileupload-element-remove" aria-hidden="true" data-target="fileupload_element_'+a+'"></i><img src="'+e.target.result+'" /><div class="rlg-multi-fileupload-progress"><div class="progress-bar"></div><div class="progress-bar-small"></div><div class="status">0%</div></div></div>';$("#additional_proof").append(t),new s(i).doUpload()},r.readAsDataURL(i)}})),$(document).on("change",".rlg-multi-fileupload input[type=file].rlg-input-file",(function(e){for(let e=0;e<$(this)[0].files.length;e++){a++;var t=$(this)[0].files[e],i=new s(t);if(i.getSize()>104857600)r(i.getName()),a--;else{if(-1!==jQuery.inArray(i.getType(),["image/png","image/jpeg","image/jpg","image/gif"])){var n=i.getType().substring(0,i.getType().indexOf("/")),o='<i class="fa fa-times rlg-multi-fileupload-element-remove" aria-hidden="true" data-target="fileupload_element_'+a+'"></i><div class="rlg-multi-fileupload-element" id="fileupload_element_'+a+'"><div class="rlg-multi-fileupload-progress"><div class="progress-bar"></div><div class="progress-bar-small"></div><div class="status">0%</div></div><i class="fa fa-file-'+n+'-o rlg-multi-fileupload-filetype" aria-hidden="true"></i><span class="rlg-multi-fileupload-filename">'+i.getName()+"</span></div>";$(this).parent().append(o),i.doUpload(),e+1==$(this)[0].files.length&&$(this).remove()}else $.siteAlert('The file "'+i.getName()+'" has a filetype ('+i.getType()+") that is not supported.","error"),a--}}}));var s=function(e){this.file=e};function r(e){$.siteAlert('The file "'+e+'" is too large. The maximum filesize allowed is '+Math.round(1e4)/100+"MB.","error")}function o(e){e.find(".status").html('<span style="color:#DA6565"><i class="fa fa-times" aria-hidden="true"></i> failed</span>')}function l(e){e.find(".status").html('<i class="fa fa-check" aria-hidden="true"></i>')}s.prototype.getType=function(){return this.file.type},s.prototype.getSize=function(){return this.file.size},s.prototype.getName=function(){return this.file.name},s.prototype.doUpload=function(){var e=this,t=new FormData;let s=$("#fileupload_element_"+a).find(".rlg-multi-fileupload-progress");var c=a,d=!1;t.append("csrf_token",$("input[name=csrf_token]").val()),t.append("type",$("#multifile").attr("data-type")),t.append("MAX_FILE_SIZE",104857600),t.append("file",this.file,this.getName()),t.append("upload_file",!0),$("input[name=reporttype]").length&&t.append("reporttype",$("input[name=reporttype]").val()),$("input[name=dataid]").length&&t.append("dataid",$("input[name=dataid]").val()),$("input[name=ownerid]").length&&t.append("ownerid",$("input[name=ownerid]").val()),$.ajax({type:"POST",url:"/ajaxfunctions/uploadAssetFile.php",xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&(t.upload.addEventListener("progress",(function(){e.progressHandling(s,event)}),!1),$(document).on("click",".rlg-multi-fileupload-element-remove[data-target=fileupload_element_"+c+"]",(function(){var a=$.inArray(c,n);-1==a?(t.abort(),d=!0):n.splice(a,1),e.abortHandling(c)}))),t},success:function(t){var a;try{a=JSON.parse(t)}catch(e){}"object"==typeof a?a.msg?"success"===a.msg?(i[c]=[],i[c].type=a.type,i[c].name=a.key,n.push(c),l(s)):"file_exceeds_max_size"===a.msg?(r(e.getName()),o(s)):"failed_verification"===a.msg?($.siteAlert("It looks like that request expired - please try again","error"),o(s)):"not_allowed"===a.msg?($.siteAlert("File uploading is currently disabled","error"),o(s)):($.siteAlert(a.msg,"error"),o(s)):0!=a.error?(1!==a.error&&2!==a.error||r(e.getName()),o(s)):l(s):("It looks like that request expired - please try again"===t&&$.siteAlert(t,"error"),o(s))},error:function(e){"object"==typeof e?e.statusText?"timeout"===e.statusText&&(d||($.siteAlert("The fileupload timed out - please try again","error"),o(s))):($.siteAlert("An unknown error occurred while uploading your file - please try again","error"),o(s)):($.siteAlert("An unknown error occurred while uploading your file - please try again.","error"),o(s))},async:!0,data:t,cache:!1,contentType:!1,processData:!1,timeout:6e4})},s.prototype.progressHandling=function(e,t){var a=0,i=t.loaded||t.position,n=t.total;t.lengthComputable&&(a=Math.ceil(i/n*100)),e.find(".progress-bar").css("width",+a+"%"),e.find(".progress-bar-small").css("width",+a+"%"),100==a?e.find(".status").html('<i class="fa fa-spinner fa-pulse" aria-hidden="true"></i>'):e.find(".status").text(a+"%")},s.prototype.abortHandling=function(e){var t=$("#fileupload_element_"+e),a=$(".rlg-multi-fileupload-element-remove[data-target=fileupload_element_"+e+"]");t.find(".rlg-multi-fileupload-progress").find(".progress-bar-small").css("bottom","5px"),t.find(".rlg-multi-fileupload-progress").find(".status").text("cancelled"),t.find(".rlg-multi-fileupload-progress").css("opacity","0.4"),setTimeout((function(){t.slideUp(400,(function(){$(this).remove()})),a.slideUp(400,(function(){$(this).remove()}))}),350)},$(document).on("submit",".rlg-body-report form, .rlg-body-support form",(function(t){if($("textarea[name=reportreason], textarea[name=message]").val().length<=10)return $.siteAlert("Report messages must be 10 or more characters long.","error"),void t.preventDefault();if($.isNumeric($(".rlg-multi-fileupload-progress").find(".status").text().replace("%","")))return $.siteAlert("Some files are still processing.","error"),void t.preventDefault();if($(".rlg-multi-fileupload-progress").find(".status").find("i.fa.fa-spinner.fa-pulse").length)return $.siteAlert("Some files are still processing.","error"),void t.preventDefault();if("reports"==$("#multifile").attr("data-type")&&0==n.length&&0==e)return $.siteAlert("Hold up! It looks like you haven't added any proof yet. Please add some and try again.","error"),void t.preventDefault();if($(".rlg-multi-fileupload").length){for(let e=0;e<n.length;e++){const t=n[e],s=i[t],r=$(this).find("#fileupload_element_"+t).closest(".rlg-multi-fileupload").attr("name");if(void 0!==r&&!1!==r){var a='<input type="hidden" name="'+r+'" data-fileid="'+t+'" data-filetype="'+s.type+'" value="'+s.name+'"/>';$(this).find("#fileupload_element_"+t).prepend(a)}}for(let e=0;e<i.length;e++){const t=i[e];if(t){let a=!1;for(let t=0;t<n.length;t++)n[t]==e&&(a=!0);if(!a){const e=$(this);if(void 0!==e&&!1!==e){var s='<input type="hidden" name="multi-fileupload-files-deleted[]" data-filetype="'+t.type+'" value="'+t.name+'"/>';e.append(s)}}}}}}))})),$(document).ready((function(){if(0!==$("#filterPlatform").length){var e=$("#filterPlatform");$(e).on("change",(function(t,a){var i=$("#filterPlatform").val(),n=$('#filterPlatform option[value="0"]');console.log(i),-1===$.inArray("1",i)&&-1===$.inArray("2",i)&&-1===$.inArray("3",i)&&-1===$.inArray("4",i)&&-1===$.inArray("5",i)||$(n).attr("disabled",!0).attr("selected",!1),null==i&&($("#filterPlatform option").attr("disabled",!1).attr("selected",!1),$("filterPlatformAll").attr("selected",!0)),$(n).attr("data-placeholder","All"),$(e).trigger("chosen:updated")}))}if(0!==$(".rlg-trade-filter").length&&$(".rlg-trade-filter").hasClass("--quality")&&$("#filterItem").change((function(){var e=$("#filterRarity"),t=$("option:selected",this);if(t.data("rarities")&&t.data("rarities").length>1){var a=$("option:selected",this).data("rarities");e.prop("disabled",!1),$("#filterRarity option").prop("disabled",!0),$('#filterRarity option[value="A"]').prop("disabled",!1),$('#filterRarity option[value="A"]').prop("selected",!0),a.forEach((function(e){$('#filterRarity option[value="'+e+'"]').prop("disabled",!1)})),$("#filterRarity").trigger("chosen:updated")}else e.prop("disabled",!0),$("#filterRarity option").prop("disabled",!0),$('#filterRarity option[value="A"]').prop("disabled",!1),$('#filterRarity option[value="A"]').prop("selected",!0),$("#filterRarity").trigger("chosen:updated")})),0!==$(".rlg-trade-filter").length&&$(".rlg-trade-filter").hasClass("--series")&&$("#filterItem").change((function(){var e=$("#filterSeries");if($("option:selected",this).data("series")){var t=$("option:selected",this).data("series");e.prop("disabled",!1),$("#filterSeries option").prop("disabled",!0),$('#filterSeries option[value="A"]').prop("disabled",!1),$('#filterSeries option[value="A"]').prop("selected",!0),t.forEach((function(e){$('#filterSeries option[value="'+e+'"]').prop("disabled",!1)})),$("#filterSeries").trigger("chosen:updated")}else e.prop("disabled",!0),$("#filterSeries option").prop("disabled",!0),$('#filterSeries option[value="A"]').prop("disabled",!1),$('#filterSeries option[value="A"]').prop("selected",!0),$("#filterSeries").trigger("chosen:updated")})),0!==$("#filterRange").length){var t=document.getElementById("filterRange"),a=$("#filterMinCredits").val(),i=$("#filterMaxCredits").val();noUiSlider.create(t,{range:{min:[0,10],"33%":[400,10],"80%":[2e3,10],max:[1e5,10]},step:10,start:[a,i],connect:!0,tooltips:!0,format:wNumb({decimals:3,thousand:"."})}),t.noUiSlider.on("update",(function(e,t){var a=e[t];t?$("#filterMaxCredits").val(a.replace(".","")):$("#filterMinCredits").val(a.replace(".",""))})),mergeTooltips(t,20," - ")}})),window.requestIdleCallback?requestIdleCallback((function(){Fingerprint2.get((function(e){var t=e.map((function(e){return e.value}));processFingerprint(Fingerprint2.x64hash128(t.join(""),63))}))})):setTimeout((function(){Fingerprint2.get((function(e){var t=e.map((function(e){return e.value}));processFingerprint(Fingerprint2.x64hash128(t.join(""),63))}))}),500),$(document).ready((function(){var e=(new Date).getTimezoneOffset();e/=60,0===(e*=-1)?$("#timezone-detection").text("which we detect to be UTC"):e>0?$("#timezone-detection").text("which we detect to be UTC +"+e):e<0&&$("#timezone-detection").text("which we detect to be UTC -"+e)})),jQuery.fn.swapWith=function(e){return this.each((function(){var t=$(e).clone(!0),a=$(this).clone(!0);$(e).replaceWith(a),$(this).replaceWith(t)}))};var emoji_regex=/^(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])+$/;const emojiCheck=e=>emoji_regex.test(e);$((function(){$(".rlg-btn-giveaway").on("click touch",(function(e){var t=$(this);t.hasClass("done")?(t.removeClass("done"),$.post("/ajaxfunctions/deleteGiveawayEntry.php",{giveawayslug:t.attr("data-giveaway"),csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.removeClass("loading"):(t.addClass("done"),e.length>0?$.siteAlert(e,"error"):$.siteAlert("Request failed","error"))})).fail((function(e){t.addClass("done"),$.siteAlert("Request failed with status: "+e.status+" - "+e.statusText,"error")}))):t.hasClass("loading")||(t.addClass("loading"),$.post("/ajaxfunctions/addGiveawayEntry.php",{giveawayslug:t.attr("data-giveaway"),csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.addClass("done"):(t.removeClass("loading"),e.length>0?$.siteAlert(e,"error"):$.siteAlert("Request failed","error"))})).fail((function(e){t.removeClass("loading"),$.siteAlert("Request failed with status: "+e.status+" - "+e.statusText,"error")})))}))})),$(document).ready((function(){$(window).on("scroll",(function(){$(".rlg-header-main__logo-scroll").toggleClass("--visible",$(this).scrollTop()>62)}))}));var showshalthis=!0;function voteForItemShopItem(e,t,a){var i=a.data("type");console.log(i),$.post("/ajaxfunctions/voteForItemShopItem.php",{item:e,vote:t,type:i,csrf_token:window.csrf_token}).done((function(i){var n,s,r,o,l;"success"==i.substring(0,7)?(a.addClass("--voted"),n=parseInt(a.children("span").text()),n++,a.children("span").text(n),1==t?(o=parseInt($("#total-positive").text()),o++,$("#total-positive").text(o)):(o=parseInt($("#total-negative").text()),o++,$("#total-negative").text(o))):"alreadyvoted"==i?a.hasClass("--voted")||a.addClass("--voted"):"voteswitched"==i?(1==t?(r=$('.rlg-item-shop__item-vote.--down[data-id="'+e+'"]'),s=parseInt(r.children("span").text()),o=parseInt($("#total-positive").text()),o++,$("#total-positive").text(o),l=parseInt($("#total-negative").text()),l--,$("#total-negative").text(l)):(r=$('.rlg-item-shop__item-vote.--up[data-id="'+e+'"]'),s=parseInt(r.children("span").text()),o=parseInt($("#total-negative").text()),o++,$("#total-negative").text(o),l=parseInt($("#total-positive").text()),l--,$("#total-positive").text(l)),s--,r.children("span").text(s),r.removeClass("--voted"),n=parseInt(a.children("span").text()),n++,a.children("span").text(n),a.addClass("--voted")):"voteremoved"==i?(n=parseInt(a.children("span").text()),n--,a.children("span").text(n),a.removeClass("--voted"),1==t?(o=parseInt($("#total-positive").text()),o--,$("#total-positive").text(o)):(o=parseInt($("#total-negative").text()),o--,$("#total-negative").text(o))):$.siteAlert("An error occured","error"),console.log(i)}))}function updateChat(e,t,a,i){const n=$("#current-chat").attr("data-current-chat"),s=new Date,r=$(".rlg-chat__messages"),o=$("#chat-messages");let l=r.attr("data-last-sender"),c=Math.floor(1e11+9e11*Math.random());const d=$("#current-chat .rlg-chat__avatar").attr("src"),u=($("#websocket").attr("data-user"),$("#current-chat").attr("data-rank-self")),p=$("#current-chat").attr("data-rank-other");let m,g="";e==n?(g=" --active",m=!0):0==i&&(g=" --new",m=!1),sameLastSender=l==e,$(`#message-thread-${0!=i?i:e}`).remove(),$("#threads").prepend(`\n      <a id="message-thread-${0!=i?i:e}" class="rlg-chat__thread${n==i?" --active":g}" href="/chat/${0!=i?i:e}">\n        <img class="rlg-chat__avatar" src="${0!=i?d:t}" alt="${0!=i?i:e}">\n        <div class="rlg-chat__meta">\n          <div class="rlg-chat__title">\n            <div class="rlg-chat__name">${0!=i?i:e}</div>\n            <time class="timeago rlg-chat__time" datetime="${s.toISOString()}">${jQuery.timeago(new Date)}</time>\n          </div>\n          <div class="rlg-chat__teaser">\n            ${0!=i?'<i class="fa fa-reply" aria-hidden="true"></i>':""}\n            ${a.replace(/^(.{30}[^\s]*).*/,"$1")}\n          </div>\n        </div>\n\n      </a>\n    `),window.threadScroller.scroll([0,"0%"],300),(m||i&&i==n)&&(o.append(`\n      <div id="message-${c}" class="rlg-chat__message ${sameLastSender?"":"--has-avatar"} ${0!=i?"--self":""} --is-${0!=i?u:p}">\n        ${sameLastSender?"":`<img class="rlg-chat__avatar" src="${t}" alt="${e}">`}\n        <div class="rlg-chat__content">\n          <div class="rlg-chat__text --${0!=i?u:p}">\n            ${a.replace(/\n/g,"<br />")}\n          </div>\n          <time class="timeago rlg-chat__time" datetime="${s.toISOString()}">${jQuery.timeago(new Date)}</time>\n        </div>\n      </div>\n    `),window.chatScroller.scroll([0,"100%"],300),0==i&&($("body").hasClass("--tab-active")?(markMessagesAsRead(e),$("#current-chat").removeClass("--new")):$("#current-chat").addClass("--new"))),r.attr("data-last-sender",e),l=e,$("time.rlg-chat__time").timeago()}function markMessagesAsRead(e){$.post("/ajaxfunctions/markUserMessagesAsSeen.php",{sender:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)||alert(e)}))}function addAutoResize(){document.querySelectorAll("[data-autoresize]").forEach((function(e){e.style.boxSizing="border-box";var t=e.offsetHeight-e.clientHeight;e.addEventListener("input",(function(e){13!==e.keyCode&&(e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+t+"px")})),e.removeAttribute("data-autoresize")}))}function getNotifications(e){const t=$("#notifications-popup");var a;a=0==e?"/ajaxfunctions/getNotifications.php":"/ajaxfunctions/getNotifications.php?last="+e,$.get(a).done((function(e){"success"==e.substring(0,7)?($(t).children("i").remove(),$(t).removeClass("--loading").append(e.substring(7)),$(".rlg-notifications__loadmore").remove(),Notifications.wait=!1):"nomore"==e.substring(0,6)?(Notifications.allLoaded=!0,$(".rlg-notifications__loadmore").remove()):"hasnonotifications"==e.substring(0,18)&&(Notifications.allLoaded=!0,$(t).children("i").remove(),$(t).removeClass("--loading"),$(t).append('<span class="rlg-notifications__hasnone">You didn\'t get any notifications yet!</span>'))}))}function markNotificationsAsSeen(){$.get("/ajaxfunctions/markNotificationsAsSeen.php").done((function(e){"success"==e.substring(0,7)&&setTimeout((function(){$("#notifications .rlg-notifcations__count").remove(),$("#notifications").removeClass("--has-notifications")}),2500)}))}$(document).ready((function(){$("#newsgrid").masonry({itemSelector:".rlg-home-news-small",columnWidth:302.5,gutter:0})})),$(document).ready((function(){$((function(){$(".rlg-select").chosen({disable_search_threshold:10,inherit_select_classes:!0,search_contains:!0})})),$("input[type=file]").nicefileinput({label:"Select file…"}),$(".rlg-input-selectable").click((function(){$(this).select()})),$(document).on("keyup",".chosen-drop .chosen-search input",(function(){$(this).val($(this).val().replace("ä","a").replace("Ä","A"))}))})),$.addInventoryItem=function(e,t,a,i,n,s){$.post("/ajaxfunctions/addInventoryItem.php",{item:e,cert:t,quantity:a,paint:i,platform:n,blueprint:s,csrf_token:window.csrf_token}).done((function(e){var t=$.parseJSON(e);if("success"==t.message.substring(0,7)){var a=t.category.toLowerCase();"goal explosions"==a?a="explosions":"rocket boosts"==a?a="boosts":"paint finishes"==a?a="paints":"engine audio"==a?a="engines":"avatar borders"==a&&(a="borders"),$('.rlg-inventory__item[data-inventory-item="'+t.id+'"]').remove(),$(".rlg-inventory-recently__items").prepend(t.html),0==$(".rlg-inventory-items."+a).length&&"all"!=document.type||$(".rlg-inventory-items."+document.type).prepend(t.html),$(".rlg-inventory-recently").hasClass("--hidden")&&$(".rlg-inventory-recently").slideToggle().removeClass("--hidden"),$(".rlg-inventory__item.--hidden").fadeIn("slow").removeClass("--hidden").css("display","inline-block");var i=$(".rlg-header-main-welcome-user > a > span").text();0==$(".rlg-inventory-tab-"+a).length&&$(".rlg-inventory-tabs").append('<li class="rlg-inventory-tab-'+a+'"><a href="/inventory/'+i+"/"+a+'">'+t.category+"</a></li>"),$("select#inventory-add-paint").val("0").trigger("chosen:updated"),$("select.rlg-inventory-add__quantity").val("1").trigger("chosen:updated"),$("select.rlg-inventory-add__certification").val("0").trigger("chosen:updated"),$(".rlg-inventory__noitems").remove()}else e="error",$(".rlg-inventory-add__error").fadeIn("slow"),setTimeout((function(){$(".rlg-inventory-add__error").fadeOut("slow")}),2e3);return $("input[name=inventory-add-send]").val("Add item to inventory").removeAttr("disabled").removeClass("--loading"),e}))},$(document).ready((function(){$(".rlg-inventory-btn-add").click((function(e){e.preventDefault(),$(".rlg-inventory-add").slideToggle("slow"),$(".rlg-inventory-recently").slideToggle().removeClass("--hidden");var t=$(".rlg-inventory-btn-add").val();$(".rlg-inventory-btn-add").val("Add items"==t?"Close add form":"Add items")})),$("input[name=inventory-add-send]").click((function(e){e.preventDefault();var t=$(this).siblings("select#inventory-add-item").val(),a=$(this).siblings("select#inventory-add-paint").val(),i=$(this).siblings("select.rlg-inventory-add__quantity").val(),n=$(this).siblings("select.rlg-inventory-add__certification").val(),s=$(this).siblings("select.rlg-inventory-add__platform").val(),r=$("input#inventory-add-blueprint").prop("checked")?"checked":"";$.addInventoryItem(t,n,i,a,s,r),$("input[name=inventory-add-send]").val("Adding…").addClass("--loading").attr("disabled")})),$("input[type=radio][name=inventory-platform]").change((function(){updateInventoryPlatform(!0)})),$(document).on("click",".rlg-inventory__item.--self",(function(){$(".rlg-inventory__item.selected").removeClass("selected"),$(".rlg-popup-options").hide(),$(this).addClass("selected");var e=$(this).attr("data-name"),t=$(this).attr("data-paint"),a=$(this).attr("data-blueprint"),i=$(this).attr("data-cert"),n=$(this).attr("data-quantity");if(void 0!==e&&!1!==e){var s;s=$(this).parents(".rlg-inventory-recently__items").length?$(".rlg-trade-display-container .rlg-trade-display-items .rlg-inventory-recently__items .rlg-popup-options"):$(".rlg-trade-display-container .rlg-trade-display-items .rlg-inventory-items + .rlg-popup-options");$(this).offset();var r=$(this).position().top+$(this).outerHeight(!0),o=$(this).position().left;s.show(),s.css({top:r,left:o}),s.children(".rlg-popup-options-title").text($(this).attr("data-name")),void 0!==t&&!1!==t?(s.find(".rlg-select#paint").val($(this).attr("data-paint")),$(".rlg-select").trigger("chosen:updated")):(s.find(".rlg-select#paint").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==i&&!1!==i?(s.find(".rlg-select#certification").val($(this).attr("data-cert")),$(".rlg-select").trigger("chosen:updated")):(s.find(".rlg-select#certification").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==a&&!1!==a&&($(this).parent().hasClass("rlg-inventory-recently__items")?s.find("input#blueprint-recently").prop("checked","1"==$(this).attr("data-blueprint")):s.find("input#blueprint").prop("checked","1"==$(this).attr("data-blueprint"))),void 0!==n&&!1!==n?($(this).attr("data-name").toLowerCase(),s.find(".rlg-input#amount").val($(this).attr("data-quantity"))):(s.find(".rlg-input#amount").val(0),s.find(".rlg-input#amount_key").val(0))}else closeItemOptions()})),$(document).on("input","#amount",(function(){$(".rlg-trade-display-item.rlg-trade-display-item-read.rlg-inventory__item.--self.selected").attr("data-quantity",this.value),$(".rlg-trade-display-item.rlg-trade-display-item-read.rlg-inventory__item.--self.selected .rlg-trade-display-item__amount").text(this.value)})),$(document).on("click",".rlg-inventory .rlg-trade-display-container .rlg-trade-display-items .rlg-popup-options .rlg-btn-delete",(function(){var e=$(".rlg-trade-display-container .rlg-trade-display-items .rlg-trade-display-items-container .rlg-trade-display-item.selected"),t=e.attr("data-inventory-item");$.post("/ajaxfunctions/deleteInventoryItem.php",{item:t,csrf_token:window.csrf_token}).done((function(t){return"success"==t.substring(0,7)?(e.remove(),closeItemOptions()):alert(t),t}))})),$(document).on("click",".rlg-inventory .rlg-trade-display-container .rlg-trade-display-items .rlg-popup-options .rlg-inventory__update",(function(){var e,t=$(".rlg-trade-display-container .rlg-trade-display-items .rlg-trade-display-items-container .rlg-trade-display-item.selected"),a=t.attr("data-inventory-item"),i=t.attr("data-paint");e=$(this).is("#update-recently")?$("#blueprint-recently").is(":checked"):$("#blueprint").is(":checked");var n=t.attr("data-cert"),s=t.attr("data-quantity");$.post("/ajaxfunctions/updateInventoryItem.php",{item:a,paint:i,blueprint:e,cert:n,quantity:s,csrf_token:window.csrf_token}).done((function(e){var a=$.parseJSON(e);if("success"==a.message.substring(0,7)){var i=a.category.toLowerCase();t.remove(),$(".rlg-inventory-recently__items").prepend(a.html),0==$(".rlg-inventory-items."+i).length&&"all"!=document.type||$(".rlg-inventory-items."+document.type).prepend(a.html),$('.rlg-inventory__item[data-inventory-item="'+a.remove+'"]').remove(),$('.rlg-inventory__item[data-inventory-item="'+a.hasItem+'"]').attr("data-quantity",a.quantity).children(".rlg-trade-display-item__amount").text(a.quantity),$(".rlg-inventory__item.--hidden").fadeIn("slow").removeClass("--hidden").css("display","inline-block"),closeItemOptions()}else alert(a.message),closeItemOptions();return e}))}))})),$(document).ready((function(){$("#new-item-alert").click((function(e){e.preventDefault(),"Add alert"===$(this).children("span").text()?$(this).children("span").text("Close"):$(this).children("span").text("Add alert"),$("#item-alert-options").slideToggle({start:function(){$(this).css({display:"flex"})}})})),$("#add-item-alert").click((function(e){e.preventDefault();let t={item:$("#filterItem").val(),cert:$("#filterCertification").val(),paint:$("#filterPaint").val(),platform:$("#filterPlatform").val(),searchtype:$("#filterSearchType").val(),type:$("#filterItemType").val(),trades:1,shop:0};$.post("/ajaxfunctions/addItemAlert.php",{item:t.item,cert:t.cert,paint:t.paint,platform:t.platform,searchtype:t.searchtype,type:t.type,trades:t.trades,shop:t.shop,csrf_token:window.csrf_token}).done((function(e){"Success"===e.substring(0,7)?($.siteAlert(e,"success"),console.log(e)):($.siteAlert(e,"error"),console.log(e))}))}))})),$(document).ready((function(){if($("#timer-featured").length>0){var e=moment.tz($("#timer-featured").attr("data-time"),"UTC");$("#timer-featured").countdown(e.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)}))}if($("#timer-daily").length>0){var t=moment.tz($("#timer-daily").attr("data-time"),"UTC");$("#timer-daily").countdown(t.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-1").length>0){var a=moment.tz($("#timer-esports-1").attr("data-time"),"UTC");$("#timer-esports-1").countdown(a.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-2").length>0){var i=moment.tz($("#timer-esports-2").attr("data-time"),"UTC");$("#timer-esports-2").countdown(i.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-3").length>0){var n=moment.tz($("#timer-esports-3").attr("data-time"),"UTC");$("#timer-esports-3").countdown(n.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-4").length>0){var s=moment.tz($("#timer-esports-4").attr("data-time"),"UTC");$("#timer-esports-4").countdown(s.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-5").length>0){var r=moment.tz($("#timer-esports-5").attr("data-time"),"UTC");$("#timer-esports-5").countdown(r.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}if($("#timer-esports-6").length>0){var o=moment.tz($("#timer-esports-6").attr("data-time"),"UTC");$("#timer-esports-6").countdown(o.toDate(),(function(e){var t="";t=0!=parseInt(e.strftime("%D"))?0==parseInt(e.strftime("%H"))?e.strftime("%-n day%!n:s;"):e.strftime("%-n day%!n:s; %-H hour%!H:s;"):0!=parseInt(e.strftime("%H"))?e.strftime("%-H hour%!H:s; %-M minute%!M:s;"):e.strftime("%-M minute%!M:s; %-S second%!S:s;"),$(this).text(t)})).on("finish.countdown",(function(){location.reload()}))}$(".rlg-item-shop__item-vote").off("click").on("click",(function(e){(e.preventDefault(),$(this).hasClass("rlg-item-shop__totalvote"))?$.siteAlert("Please cast your votes on the items!","error"):voteForItemShopItem($(this).attr("data-id"),$(this).attr("data-vote"),$(this))}))})),$((function(){$("#rlg-item-sort select").change((function(){$("#rlg-item-sort select").each((function(){var e=$(this).attr("id");$("#"+e+"_chosen").addClass("disablednoclick")})),$("#rlg-item-sort").submit()}));var e=$("#sort-tag").text();""===e&&(e="rarity"),$("#rlg-item-sort #sort").val(e);var t,a=$("#order-tag").text();""===a&&(a="ascending"),$("#rlg-item-sort #order").val(a),$("#rlg-price-form").change((function(){$(this).submit()})),$("#rlg-item-sublist #rlg-item-sublist-content #rlg-item-sublist-team-select select").change((function(){null!==t&&t.click()})),$(".rlg-items-item").click((function(){if(t=$(this),itemId=$(this).attr("data-id"),$("#rlg-item-sublist").length||$(".rlg-item-group-content").length){for(var e=$(this).parent(),a=$(this).parent(),i=0;i<10;i++){var n=a.offset().left,s=a.next();if(!(s.length&&s.offset().left>n))break;a=s}if(void 0!==e.attr("data-group-owner")&&"true"==e.attr("data-group-owner")&&void 0!==e.attr("data-group")&&$("#group-"+e.attr("data-group").toLowerCase().replace(/ /g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\./g,"-")).length)return $(".rlg-item-group-content").removeClass("active"),$("#rlg-item-sublist #rlg-item-sublist-content h2").remove(),$("#rlg-item-sublist").insertAfter($("#item-display-area")),void $("#group-"+e.attr("data-group").toLowerCase().replace(/ /g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\./g,"-")).insertAfter(a).addClass("active");if(void 0!==e.attr("data-series-owner")&&"true"==e.attr("data-series-owner")&&void 0!==e.attr("data-series")&&$("#group-"+e.attr("data-series").toLowerCase().replace(/ /g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\./g,"-")).length)return $(".rlg-item-group-content").removeClass("active"),$("#rlg-item-sublist #rlg-item-sublist-content h2").remove(),$("#rlg-item-sublist").insertAfter($("#item-display-area")),void $("#group-"+e.attr("data-series").toLowerCase().replace(/ /g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\./g,"-")).insertAfter(a).addClass("active");if($("#rlg-item-sublist").length&&($("#rlg-item-sublist #rlg-item-sublist-content h2").remove(),void 0!==e.attr("data-hasteams")&&e.attr("data-hasteams").length>0||void 0!==e.attr("data-hascolors")&&e.attr("data-hascolors").length>0)){var r;$("#rlg-item-sublist #rlg-item-sublist-content").hasClass("invalid")&&$("#rlg-item-sublist #rlg-item-sublist-content").removeClass("invalid"),void 0!==e.attr("data-name")&&e.attr("data-name").length>0?r=e.attr("data-name"):$("#rlg-item-sublist #rlg-item-sublist-content").addClass("invalid");var o=0;void 0!==e.attr("data-edition")&&e.attr("data-edition").length>0&&e.attr("data-edition")>0&&(o=e.attr("data-edition"));var l="";void 0!==e.attr("data-editionname")&&e.attr("data-editionname").length>0&&""!==e.attr("data-editionname")&&(l=e.attr("data-editionname"));var c,d,u=r;if(u=(u=(u=(u=(u=(u=(u=u.replace(new RegExp("\\\\","g"),"")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")).trim()).replace(/(<([^>]+)>)/gi,"")).toLowerCase()).replace("'","")).split(" ").join(""),"true"==e.attr("data-hasteams")&&"true"==e.attr("data-hascolors")){if(teams.length&&teamitems.length){$("#rlg-item-sublist #rlg-item-sublist-content .rlg-item-sublist-colored").remove(),$("#rlg-item-sublist #rlg-item-sublist-content #rlg-item-sublist-team-select").addClass("active");for(var p=0;p<teams.length;p++){for(var m=!1,g=0;g<teamitems.length;g++)teamitems[g][1]==teams[p][0]&&teamitems[g][0]==itemId&&(m=!0);if(m?$('#team option[value="'+teams[p][0]+'"]').removeAttr("disabled").show():$('#team option[value="'+teams[p][0]+'"]').prop("selected",!1).attr("disabled","disabled").hide(),$("#rlg-item-sublist #rlg-item-sublist-content #rlg-item-sublist-team-select select").val()==teams[p][0]){$("#rlg-item-sublist #rlg-item-sublist-content").append("<h2>"+teams[p][1]+'</h2><div class="rlg-item-sublist-colored" id="rlg-list-'+teams[p][0]+'"></div>');for(var f=0;f<paints.length;f++)c=(c=o>0?u+o+"-"+teams[p][0]+"/"+u+"-"+paints[f].replace("'","")+".png":u+"-"+teams[p][0]+"/"+u+"-"+paints[f].replace("'","")+".png").replace(/\s+/,""),d="Regular"===paints[f]?"Default":paints[f],$("#rlg-item-sublist #rlg-item-sublist-content .rlg-item-sublist-colored#rlg-list-"+teams[p][0]).append('<div><img src="/content/media/items/avatar/220px/'+c+'" title="'+d+'"><span>'+d+"</span></div>")}}$("#team option:selected").length?$("#team option:selected").is(":disabled")?($("#team option:selected").prop("selected",!1),$("#team").trigger("chosen:updated"),$("#team").find("option:not([disabled]):first").length&&($("#team").find("option:not([disabled]):first").prop("selected",!0).end().trigger("chosen:updated"),t.click())):$("#team").trigger("chosen:updated"):$("#team").find("option:not([disabled]):first").length&&($("#team").find("option:not([disabled]):first").prop("selected",!0).end().trigger("chosen:updated"),t.click())}""!==l?$("#rlg-item-sublist #rlg-item-sublist-content h1").text(r+": "+l):$("#rlg-item-sublist #rlg-item-sublist-content h1").text(r)}else if("true"==e.attr("data-hascolors")){if(paints.length){$("#rlg-item-sublist #rlg-item-sublist-content .rlg-item-sublist-colored").remove(),$("#rlg-item-sublist #rlg-item-sublist-content").append('<div class="rlg-item-sublist-colored"></div>'),$("#rlg-item-sublist #rlg-item-sublist-content #rlg-item-sublist-team-select").removeClass("active");for(var h=0;h<paints.length;h++)c=(c=o>0?u+o+"/"+u+"-"+paints[h].replace("'","")+".png":u+"/"+u+"-"+paints[h].replace("'","")+".png").replace(/\s+/,""),d="Regular"===paints[h]?"Default":paints[h],$("#rlg-item-sublist #rlg-item-sublist-content .rlg-item-sublist-colored").append('<div><img src="/content/media/items/avatar/220px/'+c+'" title="'+d+'"><span>'+d+"</span></div>")}""!==l?$("#rlg-item-sublist #rlg-item-sublist-content h1").text(r+": "+l):$("#rlg-item-sublist #rlg-item-sublist-content h1").text(r)}else $("#rlg-item-sublist #rlg-item-sublist-content").addClass("invalid"),$("#rlg-item-sublist #rlg-item-sublist-content #rlg-item-sublist-team-select").removeClass("active");$(".rlg-item-group-content").removeClass("active"),$("#rlg-item-sublist").insertAfter(a)}}})),$("#rlg-item-sublist-close").click((function(){$("#rlg-item-sublist").insertAfter($("#item-display-area"))})),$(".rlg-item-group-close").click((function(){$(this).closest(".rlg-item-group-content").removeClass("active")}))})),$(document).ready((function(){$("#league-settings-btn").click((function(){$("#league-edit").toggleClass("active")})),$("[data-team-id]").hover((function(){$("[data-team-id="+$(this).attr("data-team-id")+"]").toggleClass("hovered")})),$(".rlg-tournamentfinder-edit, .rlg-tournamentfinder-caster").click((function(){var e=$(this).attr("data-url");return window.location.href=e,!1}))})),$(document).ready((function(){var e;$(".rlg-menu-main-item").mouseenter((function(){"items"!=(e=$(this).attr("data-menu"))&&"trading"!=e&&"training"!=e&&"fantasy"!=e&&"app"!=e&&($("#menucontainer").addClass("active").addClass("is-"+e),$(".rlg-menu-main-sub-"+e).addClass("active"))})),$("#menucontainer").mouseenter((function(){"items"!=e&&"trading"!=e&&"training"!=e&&"fantasy"!=e&&"app"!=e&&($("#menucontainer").addClass("active").addClass("is-"+e),$(".rlg-menu-main-sub-"+e).addClass("active"))})),$("#menucontainer").mouseleave((function(){$("#menucontainer").removeClass("active").removeClass("is-"+e),$(".rlg-menu-main-sub-"+e).removeClass("active")})),$(".rlg-menu-main-item").mouseleave((function(){$("#menucontainer").removeClass("active"),$(".rlg-menu-main-sub-"+e).removeClass("active")}))})),$(document).ready((function(){const e=$("#reply-message #messagetext"),t=$("#reply-message #user-message-send-reply"),a=t.data("to"),i=t.data("from"),n=$(".rlg-chat__messages");t.attr("disabled",!0),$(".rlg-chat__thread.--new").length>0&&($(".rlg-message-notification").removeClass("--new"),$(".rlg-chat__thread.--active.--new").removeClass("--new")),n.animate({scrollTop:n.prop("scrollHeight")}),0!=e.length&&(window.threadScroller=$("#thread-list").overlayScrollbars({className:"os-theme-dark",resize:"none",sizeAutoCapable:!0,paddingAbsolute:!0,autoUpdate:!0,scrollbars:{clickScrolling:!0,autoHide:"leave"},overflowBehavior:{x:"visible-hidden",y:"scroll"}}).overlayScrollbars(),window.chatScroller=$("#chat").overlayScrollbars({className:"os-theme-dark",resize:"none",sizeAutoCapable:!0,paddingAbsolute:!0,autoUpdate:!0,scrollbars:{clickScrolling:!0},overflowBehavior:{x:"visible-hidden",y:"scroll"}}).overlayScrollbars(),e.on("keyup",(function(n){if($(this).val().trim(),0!=$(this).val().length?t.attr("disabled",!1):t.attr("disabled",!0),13==n.keyCode&&!n.shiftKey){let t=$("textarea#messagetext").val();e.val().trim(),0!==t.length&&(sendMessage(a,i),e.val(""),window.chatScroller.scroll([0,"100%"],300),$(e).height(22).attr("rows",1),$(".rlg-chat__actions a:first-of-type").text("Archive"))}})),$(t).click((function(){e.val().trim(),0!==messagetext.length&&(sendMessage(a,i),e.val(""),window.chatScroller.scroll([0,"100%"],300),$(e).focus(),$(e).height(22).attr("rows",1),$(".rlg-chat__actions a:first-of-type").text("Archive"))})),window.chatScroller.scroll([0,"100%"],0)),$("time.rlg-chat__time").timeago(),$("#message-reset").click((function(){$("#messagetext").val("")})),$("#reply-message-button").click((function(){$("#reply-message").addClass("active"),$("#reply-message-button").remove()})),$("#user-send-message").click((function(){$("#user-compose-message").toggleClass("active"),$("#user-message-text").focus()})),$("#user-message-cancel").click((function(){$("#user-compose-message").toggleClass("active")})),$(".rlg-messages-thread.is--gif").hover((function(){var e=$(this).find("a img.rlg-messages-thread-image").attr("src").split(".").slice(0,-1).join(".");$(this).find("a img.rlg-messages-thread-image").attr("src",e+".gif")}),(function(){var e=$(this).find("a img.rlg-messages-thread-image").attr("src").split(".").slice(0,-1).join(".");$(this).find("a img.rlg-messages-thread-image").attr("src",e+".png")})),addAutoResize(),$("#chat-hide-archived a").click((function(e){e.preventDefault(),$("#threads").removeClass("--archived")})),$("#chat-show-archived a").click((function(e){e.preventDefault(),$("#threads").addClass("--archived")}))})),window.ajax_form_methods={},$(document).ready((function(){$(document).on("submit",".dynamic-form",(function(e){e.preventDefault(),e.stopPropagation();var t=$(e.target),a=$(this).attr("action"),i=$(this).data("on-success"),n=$(this).data("on-error");let s=new FormData,r=t.serializeArray(),o=t.find('input[type="file"]');for(var l in r){var c=r[l];s.append(c.name,c.value)}o.each((function(){let e=$(this)[0];e.files.length&&s.append($(this).attr("name"),e.files[0])})),$.ajax({type:"POST",url:a,data:s,contentType:!1,processData:!1}).done((function(e){"function"==typeof ajax_form_methods[i]&&ajax_form_methods[i](e,t)})).fail((function(e){"function"==typeof ajax_form_methods[i]&&ajax_form_methods[n](e.responseJSON,t)}))}))})),ajax_form_methods.afterArticleSubmission=function(e,t){window.location.href=e.redirect_url},ajax_form_methods.articleSubmissionError=function(e,t){$.siteAlert(e.message,"error")},window.Notifications={},Notifications.allLoaded=!1,Notifications.wait=!1,Notifications.initialLoad=!1,$(document).ready((function(){if($("#notifications-popup").length>0){const e=$("#notifications-popup");"MacIntel"!==navigator.platform&&"MacPPC"!==navigator.platform||$(e).addClass("--noscrollcss"),$("#notifications").click((function(){$("#notifications .rlg-notifications__list").fadeToggle(),$("#notifications").toggleClass("--open"),0==Notifications.allLoaded&&0==Notifications.initialLoad&&(getNotifications(!1),markNotificationsAsSeen(),Notifications.initialLoad=!0)})),$((function(t){t(e).on("scroll",(function(){t(this).scrollTop()+t(this).innerHeight()>=t(this)[0].scrollHeight&&(0==Notifications.allLoaded&&0==Notifications.wait&&(Notifications.wait=!0,getNotifications(t("#notifications-popup a:last-of-type").attr("data-id")),t(e).append('<span class="rlg-notifications__loadmore"><i class="fa fa-spinner fa-pulse fa-fw"></i></span>')))}))})),$("body").on("click",(function(t){$("#notifications").hasClass("--open")&&($("#notifications .rlg-notifications__list").fadeToggle(),$(".rlg-notifcations").toggleClass("--open"),setTimeout((function(){Notifications.initialLoad=!1,$(e).empty().addClass("--loading").append('<i class="fa fa-spinner fa-pulse fa-fw"></i>')}),700))})),$(".rlg-notifications__close").click((function(t){t.preventDefault(),$("#notifications .rlg-notifications__list").fadeToggle(),setTimeout((function(){Notifications.initialLoad=!1,$(e).empty().addClass("--loading").append('<i class="fa fa-spinner fa-pulse fa-fw"></i>')}),700)})),$("#notifications .rlg-notifications__list").click((function(e){e.stopPropagation()})),$("#notifications").click((function(e){e.stopPropagation()}))}}));secsleft=null,leaguetype=null,checkinloop=null;function closePopupOptions(){$(".rlg-popup-options").is(":visible")&&$(".rlg-popup-options").hide()}function showPopupOptions(e,t){var a=$(".rlg-popup-options"),i=e.offset(),n=i.top+e.outerHeight(!0),s=i.left+e.width()/2-a.width()/2;a.show(),a.css({top:n,left:s}),a.children(".rlg-popup-options-title").text(t)}$(document).ready((function(){$("#league-team-join-select").change((function(){var e=$(this).val();$(".league-join-player-check").attr("checked",!1),$(".specify-team-boxes").hide(),$("#join-team-"+e).show()})),$("#btn-update-pro-team-bio").on("click",(function(e){var t=$("#hidden-team-id").text(),a=tinyMCE.activeEditor.getContent();$.post("/pagmanscripts/ajaxUpdateProTeamBio.php",{bio:a,team:t,csrf_token:window.csrf_token}).done((function(e){"success"!==e.substring(0,7)&&alert("ERROR: "+e)}))})),$("#btn-update-pro-team-name").on("click",(function(e){var t=$("#hidden-team-id").text(),a=$("#pro-team-edit-name-input").val();$.post("/pagmanscripts/ajaxUpdateProTeamName.php",{name:a,team:t,csrf_token:window.csrf_token}).done((function(e){"success"!==e.substring(0,7)&&alert("ERROR: "+e)}))})),$(".btn-update-pro-team-social").on("click",(function(e){var t=$("#hidden-team-id").text(),a=$(this).data("social-type"),i=$("#pro-team-edit-"+a+"-input").val();$.post("/pagmanscripts/ajaxUpdateProTeamSocial.php",{sname:i,team:t,stype:a,csrf_token:window.csrf_token}).done((function(e){"success"!==e.substring(0,7)&&alert("ERROR: "+e)}))})),$(".rlg-body-admin-additemgroup #item").change((function(){var e=$(this).find(":selected").parent().attr("label");$(".rlg-body-admin-additemgroup #items optgroup").each((function(){$(this).removeAttr("disabled"),$(this).attr("label")!==e&&$(this).attr("disabled",!0)})),$(".rlg-body-admin-additemgroup #items").trigger("chosen:updated")})),$(".rlg-body-admin-edititemgroup #item").change((function(){var e=$(this).find(":selected").parent().attr("label");$(".rlg-body-admin-additemgroup #items optgroup").each((function(){$(this).removeAttr("disabled"),$(this).attr("label")!==e&&$(this).attr("disabled",!0)})),$(".rlg-body-admin-edititemgroup #items").trigger("chosen:updated")})),$(".rlg-network.--link").click((function(){if(!$(this).find(".rlg-network__name i.fa").hasClass("fa-spinner fa-spin")){$(this).find(".rlg-network__name i.fa").removeClass("fa-plus").addClass("fa-spinner fa-spin");var e=$(this);setTimeout((function(){var t=e.attr("data-userid"),a=prompt("(steam, xbox, psn, switch, epic)\r\nSelect platform:","");null===a&&e.find(".rlg-network__name i.fa").removeClass("fa-spinner fa-spin").addClass("fa-plus");var i="";switch(a.toLowerCase()){case"steam":i=prompt("Enter Steam profile URL (not Steam ID)","");break;case"xbox":i=prompt("Enter Xbox Live gamertag","");break;case"psn":i=prompt("Enter PSN ID","");break;case"switch":i=prompt("Enter Switch friend code","");break;case"epic":i=prompt("Enter Epic username","");break;default:a="",e.find(".rlg-network__name i.fa").removeClass("fa-spinner fa-spin").addClass("fa-plus"),alert("Invalid platform specified")}null===i?e.find(".rlg-network__name i.fa").removeClass("fa-spinner fa-spin").addClass("fa-plus"):""!==a&&""!==i&&$.post("/ajaxfunctions/linkPlatformToAccount.php",{platform:a,platformid:i,userid:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?alert("Platform successfully linked to account!\r\n(refresh page to view changes)"):alert(e)})).fail((function(e){alert("Request failed with status: "+e.status+" - "+e.statusText)})).done((function(){e.find(".rlg-network__name i.fa").removeClass("fa-spinner fa-spin").addClass("fa-plus")}))}),100)}})),$("#loadSeriesItemsFromIngameData").click((function(){var e=null;$("#itemseriesingameid").length&&$("#itemseriesingameid").val()?(e=$("#itemseriesingameid").val(),$.get("/pagmanscripts/ajaxGetSeriesItems.php?ingameid="+e).done((function(e){if("failed"==e.substring(0,6))$.siteAlert("Failed to fetch items. Perhaps the series ID provided is invalid?","error");else{var t=JSON.parse(e);if(Array.isArray(t)){$("#items option:selected").prop("selected",!1);var a=!1;for(let e=0;e<t.length;e++){var i=t[e];$('#items option[value="'+i+'"]').length?$('#items option[value="'+i+'"]').prop("selected",!0):a=!0}$("#items").trigger("chosen:updated"),a?$.siteAlert("Items loaded successfully, but one or more items failed to be selected in the dropdown. Please doublecheck!","warning"):$.siteAlert("Items loaded successfully!","success")}else $.siteAlert("Items were returned, but the format was invalid for some reason","error")}}))):$.siteAlert("No series ingame ID provided","error")}))})),$(document).ready((function(){$(".rlg-popup-options-close").on("click",(function(){closePopupOptions()}))})),$(document).on("click","#payment-method #payment-methods #paywith-stripe",(function(){$("#payment-form #payment-method #payment-methods").removeClass("active"),$("#payment-form #payment-method #payment-method-selected").addClass("active"),$("#payment-form #stripe-form").addClass("active")})),$(document).on("click","#payment-method #payment-method-selected #payment-method-change",(function(){$("#payment-form #stripe-form").removeClass("active"),$("#payment-form #payment-method #payment-method-selected").removeClass("active"),$("#payment-form #payment-method #payment-methods").addClass("active")})),$(document).ready((function(){$(".rlg-premium__features .rlg-premium__perk").hover((function(){var e=$(this).attr("data-about");$(this).data("tipText",e),""==e||$('<p class="rlg-premium__tooltip"></p>').fadeIn(200).text(e).appendTo("body")}),(function(){$(this).attr("data-about",$(this).data("tipText")),$(".rlg-premium__tooltip").fadeOut(200)})).mousemove((function(e){var t=e.pageX,a=e.pageY;$(".rlg-premium__tooltip").css({top:a,left:t})}))})),$(document).ready((function(){window.location.hash&&("#schedule"===window.location.hash?($(".rlg-tabs li").removeClass("active"),$("#rpl-tabli-schedule").addClass("active"),$("#schedule").addClass("active"),$("#schedule").siblings().removeClass("active")):"#teamstats"===window.location.hash?($(".rlg-tabs li").removeClass("active"),$("#rpl-tabli-teamstats").addClass("active"),$("#team-stats").addClass("active"),$("#team-stats").siblings().removeClass("active")):"#playerstats"===window.location.hash?($(".rlg-tabs li").removeClass("active"),$("#rpl-tabli-playerstats").addClass("active"),$("#player-stats").addClass("active"),$("#player-stats").siblings().removeClass("active")):"#videos"===window.location.hash&&($(".rlg-tabs li").removeClass("active"),$("#rpl-tabli-videos").addClass("active"),$("#videos").addClass("active"),$("#videos").siblings().removeClass("active")))})),$((function(){$("#isnotunderage").change((function(){this.checked?($("#parentemail").hide(),$("#agesection").removeClass("unchecked")):($("#parentemail").show(),$("#agesection").addClass("unchecked"))})),$("#rlg-form-register").submit((function(e){e.preventDefault()}))}));var liveSearchTimer,registerTries=0;function submitRegister(){if(registerTries>10)$.siteAlert("Too many attempts","error");else{var e=getFormData($("#rlg-form-register"));$.post("/ajaxfunctions/registerAccount.php",e).done((function(e){enableBtn($("button.prevent"),"Register account"),"success"==e.substring(0,7)?window.location.assign("/register/success"):$.siteAlert(e,"error")}))}registerTries++}function getFormData(e){var t=e.serializeArray(),a={};return $.map(t,(function(e,t){a[e.name]=e.value})),a}function scrollFunction(e){void 0!==e&&null!=e&&(document.body.scrollTop>20||document.documentElement.scrollTop>20?(e.style.opacity=1,e.style.pointerEvents="all"):(e.style.opacity=0,e.style.pointerEvents="none"))}function topFunction(){$("html, body").animate({scrollTop:0},"slow")}function addEvent(e,t,a,i){return null==i&&(i=!1),e.addEventListener?(e.addEventListener(t,a,i),!0):!!e.attachEvent&&e.attachEvent("on"+t,a)}function setTabActiveState(e){"active"===e?($("body").addClass("--tab-active"),$("body").removeClass("--tab-inactive"),0!=$("#current-chat").length&&$("#current-chat").hasClass("--new")&&markMessagesAsRead($("#current-chat").data("current-chat"))):"inactive"===e&&($("body").addClass("--tab-inactive"),$("body").removeClass("--tab-active"))}function closeItemOptions(){$("#rlg-trade-creator .rlg-popup-options").is(":visible")&&$("#rlg-trade-creator .rlg-popup-options").hide()}function addTradeComment(e){var t=$("textarea#addtradecomment").val();t.length>=6?$.post("/ajaxfunctions/tradeComment.php",{tradeid:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addtradecomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):($.siteAlert("Comments need to be at least 6 characters long","error"),enableTradeButton())}function bookmarkTrade(e,t){t.hasClass("--bookmarked")?t.hasClass("--bookmarked")&&$.post("/ajaxfunctions/bookmarkTradeRemove.php",{alias:e,csrf_token:csrf_token}).done((function(e){"success"==e.substring(0,7)?(t.removeClass("--bookmarked"),t.children("span").text("Bookmark")):$.siteAlert(e,"error")})):$.post("/ajaxfunctions/bookmarkTrade.php",{alias:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?(t.addClass("--bookmarked"),t.children("span").text("Remove from bookmarks")):$.siteAlert(e,"error")}))}function simple_tooltip(e,t){$(e).each((function(e){$("body.rlg-body-trading").append("<div class='"+t+"' id='"+t+e+"' style='border-bottom-color: #"+$(this).data("hex")+"'><p>"+$(this).attr("data-name")+"</p></div>"),$("body.rlg-body-trade").append("<div class='"+t+"' id='"+t+e+"' style='border-bottom-color: #"+$(this).data("hex")+"'><p>"+$(this).attr("data-name")+"</p></div>"),$("body.rlg-body-player").append("<div class='"+t+"' id='"+t+e+"' style='border-bottom-color: #"+$(this).data("hex")+"'><p>"+$(this).attr("data-name")+"</p></div>"),$("body.rlg-body-profileTrades").append("<div class='"+t+"' id='"+t+e+"' style='border-bottom-color: #"+$(this).data("hex")+"'><p>"+$(this).attr("data-name")+"</p></div>");var a=$("#"+t+e);$(this).removeAttr("title").mouseover((function(){a.css({display:"none"}).fadeIn(100)})).mousemove((function(e){a.css({left:e.pageX+15,top:e.pageY+15})})).mouseout((function(){a.fadeOut(100)}))}))}function fetchTrades(){var e=location.search;console.log(location.search);var t=$(document).scrollTop();console.log(t),$(".rlg-trading__loadmore button").text("Loading…").prop("disabled",!0),$.post("/ajaxfunctions/loadAdditionalTrades.php"+e,{trades:window.tradingTrades,timestamp:window.tradingTimestamp,csrf_token:window.csrf_token}).done((function(e){if($(".rlg-trading__loadmore button").text("Load more trades…").prop("disabled",!1),"error"==e.substring(0,5))$("#trading-trades").append(e.substring(5));else if("endoflist"==e.substring(0,9))$("#trading-trades").append(e.substring(9)),$(".rlg-trading__loadmore").remove();else{window.tradingPage=window.tradingPage+1;var a=$(e);$("#fetched-trades",a.wrapAll($("<div>")).parent()).each((function(e,t){window.tradingTrades=$(t).data("ids"),window.tradingTimestamp=$(t).data("timestamp")}));var i=$(a).not("#fetched-trades");$("#trading-trades").append('<div class="rlg-headline__line rlg-trading__page"><span>&nbsp;</span><h2>Page '+window.tradingPage+"</h2><span>&nbsp;</span></div>"),$("#trading-trades").append(i),$(document).scrollTop(t)}}))}function likeTrainingSequence(e,t){t.hasClass("liked")?$.post("/ajaxfunctions/likeTrainingSequenceRemove.php",{code:e,csrf_token:window.csrf_token}).done((function(e){if("success"==e.substring(0,7)){t.removeClass("liked");var a=t.parent().siblings(".rlg-training-content").children("a").children(".rlg-training-bottom").children(".rlg-training-upvotes").children("span"),i=t.siblings(".rlg-training-page-likes"),n=a.text().match(/\d+/),s=i.text().match(/\d+/);n--,s--,a.text(n+" like"),1!=n&&a.text(a.text()+"s"),i.text(s)}else alert(e)})):$.post("/ajaxfunctions/likeTrainingSequence.php",{code:e,csrf_token:window.csrf_token}).done((function(e){if("success"==e.substring(0,7)){t.addClass("liked");var a=t.parent().siblings(".rlg-training-content").children("a").children(".rlg-training-bottom").children(".rlg-training-upvotes").children("span"),i=t.siblings(".rlg-training-page-likes"),n=a.text().match(/\d+/),s=i.text().match(/\d+/);n++,s++,a.text(n+" like"),1!=n&&a.text(a.text()+"s"),i.text(s)}else alert(e)}))}function favTrainingSequence(e,t){t.hasClass("favorited")?$.post("/ajaxfunctions/favTrainingSequenceRemove.php",{code:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.removeClass("favorited"):alert(e)})):$.post("/ajaxfunctions/favTrainingSequence.php",{code:e,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?t.addClass("favorited"):alert(e)}))}function addTrainingSequenceComment(e){var t=$("textarea#addtrainingsequencecomment").val();t.length>=6?$.post("/ajaxfunctions/trainingSequenceComment.php",{code:e,comment:t,csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)?($("#rlg-comments-added").append(e.substring(7)),$("textarea#addtrainingsequencecomment").val(""),$("#no-comment-text").slideUp()):alert(e)})):$.siteAlert("Comments need to be at least 6 characters long","error")}function updateSiteTitleBadge(e,t=!1){let a;const i=/\((.*)\)/;a=document.title,i.test(a)?document.title=e>0?"("+e+")"+a.replace(`(${a.match(i)[1]})`,""):a.replace(`(${a.match(i)[1]})`,""):e>0?(total=t?1:e,document.title=`(${total}) ${a}`):document.title=`${a}`}function convertFromHex(e){e=e.toString();let t="";for(let a=0;a<e.length;a+=2)t+=String.fromCharCode(parseInt(e.substr(a,2),16));return t}$(document).ready((function(){var e;$(".rlg-report__template").click((function(){var e=$(this).data("template");$(this).parent().prev().children("textarea").val(e),$("#reportmessage-1").sync()})),$('input:radio[name="report-status"]').change((function(){$("#open").is(":checked")?($("#status-open").addClass("active"),$("#status-closed").removeClass("active"),$("#status-pending").removeClass("active")):$("#pending").is(":checked")?($("#status-open").removeClass("active"),$("#status-closed").removeClass("active"),$("#status-pending").addClass("active")):$("#closed").is(":checked")&&($("#status-open").removeClass("active"),$("#status-closed").addClass("active"),$("#status-pending").removeClass("active"))})),$.scrollReportChat=function(){var e=document.getElementById("report-chat");e.scrollTop=e.scrollHeight},window.onload=function(){$("#report-chat").length>0&&$.scrollReportChat()},$("#report-macros").on("change",(function(){var e=$(this).children("optgroup").children("option:selected").attr("data-status");$("input[type=radio][name=report-status]").filter("[value="+e+"]").prop("checked",!0);var t=$("#"+this.value).text().split("  ").join("");$("#messagetext").val((function(){return t}))})),$("#show-player-reports").click((function(t){t.preventDefault(),e=$(".rlg-reports__profile").prop("scrollHeight"),$(".rlg-reports__profile").css("height",e),$(this).remove()}))})),$((function(){$("#rlg-rewards-select-crate .rlg-rewards-crate-open a").click((function(){return $(this).parent().parent().parent().hasClass("rlg-rewards-crate-item-random")?confirm("You are about to spend 2 (two) RLG Keys. Are you sure?"):confirm("You are about to spend 1 (one) RLG Key. Are you sure?")})),$("#howdoiearnmore").click((function(){$("#rlg-rewards-tabli-faq a").click()}))})),$(document).ready((function(){smoothScroll.init({speed:500,easing:"easeInOutCubic",updateURL:!0,offset:50}),scrollTopButton=document.getElementById("rlg-scrollup"),"undefined"!=typeof scrollTopButton&&null!=scrollTopButton&&(window.onscroll=function(){scrollFunction(scrollTopButton)})})),$(document).ready((function(){$("#rlg-search-box").keyup((function(){window.clearTimeout(liveSearchTimer),liveSearchTimer=setTimeout((function(){var e=$("#rlg-search-box").val();e.length>=3?$.post("/ajaxfunctions/livesearch.php",{query:e,csrf_token:window.csrf_token}).done((function(e){$("#rlg-search-results").html(e)})):$("#header-search-container").removeClass("active"),e.length>=3&&$("#rlg-search-box").is(":focus")&&$("#header-search-container").addClass("active")}),500)})),$("#rlg-search-box").focusout((function(){$("#rlg-search-results:hover").length?$("#rlg-search-box").focus():($("#header-search-container").removeClass("active"),$("#rlg-search-box").val(""))})),$("#rlg-comp-manage-search-input").keyup((function(){var e=$("#rlg-comp-manage-search-input").val();e.length>=3?$.post("/ajaxfunctions/bracketSearch.php",{query:e,csrf_token:window.csrf_token}).done((function(e){$("#rlg-comp-manage-search-results").html(e)})):$("#rlg-comp-manage-search-results").slideUp((function(){$("#rlg-comp-manage-search-results").html(""),$("#rlg-comp-manage-search-results").text("")})),e.length>=3&&$("#rlg-comp-manage-search-input").is(":focus")&&$("#rlg-comp-manage-search-results").slideDown()})),$("#rlg-comp-manage-search-input").focusout((function(){setTimeout((function(){}),150)}))})),$(document).ready((function(){var e=["length","#mytradespage","innerHTML","documentElement","/ajaxfunctions/myTrades.php","csrf_token","post"];$(e[1])[e[0]]>0&&setTimeout((function(){var t=document[e[3]][e[2]];$[e[6]](e[4],{code:t,csrf_token:window[e[5]]})}),5e3)})),$(document).ready((function(){$("#support-form").not(".--show").css("display","none"),$("#support-assign").length>0&&$("#support-assign").change((function(){var e=$(this).val(),t=$(this).attr("data-url");window.location.href=t+e})),$("#support-rlgarage").click((function(){$("#support-selection").hide(),$("#support-form").show()}))})),window.onload=function(e){var t=document.querySelectorAll("img.svg");SVGInjector(t)},$(document).ready((function(){window.location.hash&&($(".rlg-gen-tab-link").removeClass("active"),$("#tab-"+window.location.hash.substring(1)).addClass("active"),$("#tab-"+window.location.hash.substring(1)+"-content").siblings().removeClass("active"),$("#tab-"+window.location.hash.substring(1)+"-content").addClass("active")),$(".rlg-tabs li").click((function(){$(this).addClass("active"),$(this).siblings().removeClass("active");var e=$(this).attr("data-content");$("#"+e).addClass("active"),$("#"+e).siblings().removeClass("active"),$("#tab-"+e+"-content").addClass("active"),$("#tab-"+e+"-content").siblings().removeClass("active")})),addEvent(document,"potentialvisilitychange",(function(e){document.potentialHidden?setTabActiveState("inactive"):setTabActiveState("active")}));var e=null,t=null;void 0!==document.mozHidden?(e="mozHidden",t="mozvisibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden?(e="webkitHidden",t="webkitvisibilitychange"):void 0!==document.hidden&&(e="hidden",t="visibilitychange"),null!=e&&null!=t&&addEvent(document,t,(function(t){document[e]?setTabActiveState("inactive"):setTabActiveState("active")}));var a={pageVisibilityChangeThreshold:(10800,4),init:function(){function e(){var e=document.potentialHidden;document.potentialHidden=!1,document.potentiallyHiddenSince=0,e&&i()}function t(){r||(s=new Date,null!=o&&clearTimeout(o),o=setTimeout(n,1e3*a.pageVisibilityChangeThreshold+100))}function i(){unifiedVisilityChangeEventDispatchAllowed=!1;var e=document.createEvent("Event");e.initEvent("potentialvisilitychange",!0,!0),document.dispatchEvent(e)}function n(){var e=r||null==s?0:Math.floor(((new Date).getTime()-s.getTime())/1e3);document.potentiallyHiddenSince=e,e>=a.pageVisibilityChangeThreshold&&!document.potentialHidden&&(document.potentialHidden=!0,i())}var s=null,r=!0;document.potentialHidden=!1,document.potentiallyHiddenSince=0;var o=null;addEvent(document,"pageshow",(function(e){setTabActiveState("active")})),addEvent(document,"pagehide",(function(e){setTabActiveState("inactive")})),addEvent(window,"pageshow",(function(e){setTabActiveState("active")})),addEvent(window,"pagehide",(function(e){setTabActiveState("inactive")})),addEvent(document,"mousemove",(function(e){s=new Date})),addEvent(document,"mouseover",(function(t){!0,e()})),addEvent(document,"mouseout",(function(e){!1,t()})),addEvent(window,"blur",(function(e){r=!1,t()})),addEvent(window,"focus",(function(t){r=!0,e()})),e()}};a.init()})),$(document).ready((function(){$("#teasetext").hover((function(){parts=$("#teasetext").html().split("'"),$("#teasetext").html(parts[0]+"<a href='https://rocket-league.com/kevin' target='_blank'>'</a>"+parts[1])}),(function(){$("#teasetext").html($("#teasetext").text().replace("<a href='https://rocket-league.com/kevin' target='_blank'>'</a>","'"))}))})),$(document).ready((function(){$(document).mousemove((function(e){var t={x:-1,y:-1};t.x=e.clientX+20,t.y=e.clientY,$(".rlg-tradescore__details").css("top",t.y).css("left",t.x),$(".rlg-tradescore-info").hover((function(){$(this).next(".rlg-tradescore__details").addClass("--visible")})),$(".rlg-tradescore-info").mouseleave((function(){$(this).next(".rlg-tradescore__details").removeClass("--visible")}))})),$(".rlg-tradescore-info").mouseenter((function(){var e=$(this).next().find(".rlg-tradescore__additional"),t=$(this).attr("data-ip");0==$(e).hasClass("--has-data")&&$.post("/ajaxfunctions/getIpGeoInfo.php",{ip:t,csrf_token:window.csrf_token}).done((function(t){e.html(t),e.addClass("--has-data")}))})),$("#show-useragent, #show-referer").click((function(e){e.preventDefault(),$(this).next("div").slideToggle()}))})),$(document).ready((function(){var t=$("#trading-language").val();function a(){$(".rlg-btn-trade-form").css("pointer-events","all").css("opacity","1").removeAttr("disabled").html("Send")}$("#trading-language").change((function(){var e=window.location.href;e.indexOf("?")>-1?-1==e.indexOf("language")?location.href=e+"&language="+$(this).val():location.href=e.replace("language="+t,"language="+$(this).val()):location.href=e+"?language="+$(this).val(),t=$(this).val()})),$(".rlg-btn-trade-form").click((function(){$(".rlg-btn-trade-form").css("pointer-events","none").css("opacity","0.5").attr("disabled","disabled").html("Verifying…")})),$(".rlg-trade__note").each((function(){$(this).height()>=120&&($(this).addClass("--limit"),$(this).next(".rlg-trade__noteexpand").show())})),$(".rlg-trade__noteexpand").click((function(){$(this).prev(".rlg-trade__note").removeClass("--limit"),$(this).remove()})),$("#rlg-trade-creator .rlg-trade__items .rlg-item").click((function(){$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected").removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("data-name"),t=$(this).attr("data-paint"),a=$(this).attr("data-cert"),i=$(this).attr("data-quantity"),n=$(this).attr("data-blueprintable"),s=$(this).attr("data-blueprint"),r=$(this).attr("data-series"),l=$(this).attr("data-series-selected"),c=$(this).attr("data-rarities"),d=$(this).attr("data-rarity-selected");if(void 0!==e&&!1!==e){var u=$("#rlg-trade-creator .rlg-popup-options"),p=$(this).offset().top+$(this).outerHeight(!0),m=$(this).offset().left;if("key"==$(this).attr("data-name").toLowerCase()?($("#amount_chosen").addClass("hidden"),$("#amount_credits").addClass("hidden"),$("#amount_key_chosen").removeClass("hidden")):"credits"==$(this).attr("data-name").toLowerCase()?($("#amount_chosen").addClass("hidden"),$("#amount_credits").removeClass("hidden"),$("#amount_key_chosen").addClass("hidden")):($("#amount_key_chosen").addClass("hidden"),$("#amount_credits").addClass("hidden"),$("#amount_chosen").removeClass("hidden")),u.show(),u.css({top:p,left:m}),u.children(".rlg-popup-options-title").text($(this).attr("data-name")),void 0!==t&&!1!==t?(u.find(".rlg-select#paint").val($(this).attr("data-paint")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#paint").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==a&&!1!==a?(u.find(".rlg-select#certification").val($(this).attr("data-cert")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#certification").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==i&&!1!==i?("key"==$(this).attr("data-name").toLowerCase()?u.find(".rlg-select#amount_key").val($(this).attr("data-quantity")):"credits"==$(this).attr("data-name").toLowerCase()?u.find("#amount_credits").val($(this).attr("data-quantity")):u.find(".rlg-select#amount").val($(this).attr("data-quantity")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#amount").val(0),u.find(".rlg-select#amount_key").val(0),u.find("#amount_credits").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==s&&!1!==s&&"true"==s?u.find("#blueprint").prop("checked",!0):u.find("#blueprint").prop("checked",!1),void 0!==n&&!1!==n&&"true"==n?u.find("#blueprint").removeAttr("disabled").parent(".rlg-checkbox").show():u.find("#blueprint").prop("checked",!1).attr("disabled",!0).parent(".rlg-checkbox").hide(),void 0!==r&&!1!==r){seriesArray=r.split(",");for(var g=0,f=0;f<seriesArray.length;++f)"undefined"!==seriesArray[f]&&seriesArray[f]>0&&g++;g>0?(itemSeriesDD=u.find("#itemseries"),itemSeriesDD.find("> option").each((function(){"0"===this.value||-1!==jQuery.inArray(this.value,seriesArray)?$(this).prop("disabled",!1).show():$(this).prop("disabled",!0).hide()})),void 0!==l&&!1!==l?u.find("#itemseries").val($(this).attr("data-series-selected")):u.find("#itemseries").val(0),itemSeriesDD.prop("disabled",!1).trigger("chosen:updated").parent("#itemseriesContainer").show()):u.find("#itemseries").prop("disabled",!0).trigger("chosen:updated").parent("#itemseriesContainer").hide()}else u.find("#itemseries").prop("disabled",!0).trigger("chosen:updated").parent("#itemseriesContainer").hide();if(void 0!==c&&!1!==c){rarityArray=c;for(var h=0,v=0;v<rarityArray.length;++v)"undefined"!==rarityArray[v]&&rarityArray[v]>0&&h++;h>1?(itemRarityDD=u.find("#itemrarity"),itemRarityDD.find("> option").each((function(){-1!==jQuery.inArray(this.value,rarityArray)?$(this).prop("disabled",!1).show():$(this).prop("disabled",!0).hide()})),void 0!==d&&!1!==d?u.find("#itemrarity").val($(this).attr("data-rarity-selected")):u.find("#itemrarity").val(0),itemRarityDD.prop("disabled",!1).trigger("chosen:updated").parent("#itemrarityContainer").show()):u.find("#itemrarity").prop("disabled",!0).trigger("chosen:updated").parent("#itemrarityContainer").hide()}else u.find("#itemrarity").prop("disabled",!0).trigger("chosen:updated").parent("#itemrarityContainer").hide();"undefined"!=typeof showBlueprintTooltip&&showBlueprintTooltip&&$("#blueprintHelpTooltip").length&&void 0!==n&&!1!==n&&"true"==n&&$.post("/ajaxfunctions/updateTooltipSeen.php",{tooltip:"blueprintTooltipSeen",csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)&&($("#blueprintHelpTooltip").fadeOut("normal",(function(){$(this).remove()})),showBlueprintTooltip=!1)}))}else closeItemOptions();$(".rlg-trade-display-container .rlg-trade-selector-container .rlg-trade-selector-header input.rlg-input[name=search]").val(""),o("",!1)})),$(".rlg-trade-display-container .rlg-trade-display-items .rlg-trade-display-items-container .rlg-trade-display-item:not(.rlg-inventory__item)").click((function(){$(".rlg-trade-display-container .rlg-trade-display-items .rlg-trade-display-items-container .rlg-trade-display-item.selected").removeClass("selected"),$(this).addClass("selected");var e=$(this).attr("data-name"),t=$(this).attr("data-paint"),a=$(this).attr("data-cert"),i=$(this).attr("data-quantity"),n=$(this).attr("data-blueprintable"),s=$(this).attr("data-blueprint"),r=$(this).attr("data-series"),l=$(this).attr("data-series-selected"),c=$(this).attr("data-rarities"),d=$(this).attr("data-rarity-selected");if(void 0!==e&&!1!==e){var u=$(".rlg-trade-display-container .rlg-trade-display-items .rlg-popup-options"),p=($(this).offset(),$(this).position().top+$(this).outerHeight(!0)),m=$(this).position().left;if("key"==$(this).attr("data-name").toLowerCase()?($("#amount_chosen").addClass("hidden"),$("#amount_credits").addClass("hidden"),$("#amount_key_chosen").removeClass("hidden")):"credits"==$(this).attr("data-name").toLowerCase()?($("#amount_chosen").addClass("hidden"),$("#amount_credits").removeClass("hidden"),$("#amount_key_chosen").addClass("hidden")):($("#amount_key_chosen").addClass("hidden"),$("#amount_credits").addClass("hidden"),$("#amount_chosen").removeClass("hidden")),u.show(),u.css({top:p,left:m}),u.children(".rlg-popup-options-title").text($(this).attr("data-name")),void 0!==t&&!1!==t?(u.find(".rlg-select#paint").val($(this).attr("data-paint")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#paint").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==a&&!1!==a?(u.find(".rlg-select#certification").val($(this).attr("data-cert")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#certification").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==i&&!1!==i?("key"==$(this).attr("data-name").toLowerCase()?u.find(".rlg-select#amount_key").val($(this).attr("data-quantity")):"credits"==$(this).attr("data-name").toLowerCase()?u.find("#amount_credits").val($(this).attr("data-quantity")):u.find(".rlg-select#amount").val($(this).attr("data-quantity")),$(".rlg-select").trigger("chosen:updated")):(u.find(".rlg-select#amount").val(0),u.find(".rlg-select#amount_key").val(0),u.find("#amount_credits").val(0),$(".rlg-select").trigger("chosen:updated")),void 0!==s&&!1!==s&&"true"==s?u.find("#blueprint").prop("checked",!0):u.find("#blueprint").prop("checked",!1),void 0!==n&&!1!==n&&"true"==n?u.find("#blueprint").removeAttr("disabled").parent(".rlg-checkbox").show():u.find("#blueprint").prop("checked",!1).attr("disabled",!0).parent(".rlg-checkbox").hide(),void 0!==r&&!1!==r){seriesArray=r.split(",");for(var g=0,f=0;f<seriesArray.length;++f)"undefined"!==seriesArray[f]&&seriesArray[f]>0&&g++;g>0?(itemSeriesDD=u.find("#itemseries"),itemSeriesDD.find("> option").each((function(){"0"===this.value||-1!==jQuery.inArray(this.value,seriesArray)?$(this).prop("disabled",!1).show():$(this).prop("disabled",!0).hide()})),void 0!==l&&!1!==l?u.find("#itemseries").val($(this).attr("data-series-selected")):u.find("#itemseries").val(0),itemSeriesDD.prop("disabled",!1).trigger("chosen:updated").parent("#itemseriesContainer").show()):u.find("#itemseries").prop("disabled",!0).trigger("chosen:updated").parent("#itemseriesContainer").hide()}else u.find("#itemseries").prop("disabled",!0).trigger("chosen:updated").parent("#itemseriesContainer").hide();if(void 0!==c&&!1!==c){rarityArray=c;for(var h=0,v=0;v<rarityArray.length;++v)"undefined"!==rarityArray[v]&&rarityArray[v]>0&&h++;h>1?(itemRarityDD=u.find("#itemrarity"),itemRarityDD.find("> option").each((function(){-1!==jQuery.inArray(this.value,rarityArray)?$(this).prop("disabled",!1).show():$(this).prop("disabled",!0).hide()})),void 0!==d&&!1!==d?u.find("#itemrarity").val($(this).attr("data-rarity-selected")):u.find("#itemrarity").val(0),itemRarityDD.prop("disabled",!1).trigger("chosen:updated").parent("#itemrarityContainer").show()):u.find("#itemrarity").prop("disabled",!0).trigger("chosen:updated").parent("#itemrarityContainer").hide()}else u.find("#itemrarity").prop("disabled",!0).trigger("chosen:updated").parent("#itemrarityContainer").hide();"undefined"!=typeof showBlueprintTooltip&&showBlueprintTooltip&&$("#blueprintHelpTooltip").length&&void 0!==n&&!1!==n&&"true"==n&&$.post("/ajaxfunctions/updateTooltipSeen.php",{tooltip:"blueprintTooltipSeen",csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)&&($("#blueprintHelpTooltip").fadeOut("normal",(function(){$(this).remove()})),showBlueprintTooltip=!1)}))}else closeItemOptions();$(".rlg-trade-display-container .rlg-trade-selector-container .rlg-trade-selector-header input.rlg-input[name=search]").val(""),o("",!1)})),$(".rlg-trade-selector-container .rlg-trade-selector-items .rlg-trade-selector-item").click((function(){var e,t;void 0!==$(this).attr("data-rarities")?(e=JSON.parse($(this).attr("data-rarities"))[0],t=allRarities[e]):t=$(this).attr("data-rarity").replace(/\s+/g,"-").toLowerCase();var a=$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected"),i='<div class="rlg-item__gradient --'+t+'"></div>',n='<img class="rlg-item__image" src="'+$(this).children("img").attr("src")+'" alt="'+$(this).attr("data-name")+'">',s='<div class="rlg-item__text"><h2 class="rlg-item__name">'+$(this).attr("data-name")+"</h2></div>",r="credits"==$(this).attr("data-name").toLowerCase()?'<div class="rlg-item__quantity --quantity-100 --premium wide">100</div>':"";a.empty(),a.attr("data-originalimg",$(this)[0].hasAttribute("data-originalimg")?$(this).attr("data-originalimg"):$(this).children("img").attr("src")).attr("data-name",$(this).attr("data-name")).attr("data-rarity",void 0!==$(this).attr("data-rarities")?allRarities[JSON.parse($(this).attr("data-rarities"))[0]]:$(this).attr("data-rarity")).attr("data-rarityid",void 0!==$(this).attr("data-rarities")?JSON.parse($(this).attr("data-rarities"))[0]:$(this).attr("data-rarityid")).attr("data-item",$(this).attr("data-item")).attr("data-quantity","credits"==$(this).attr("data-name").toLowerCase()?100:1).attr("data-blueprintable",$(this).attr("data-blueprintable")).attr("data-blueprint",!!$("#toggleblueprints").is(":checked")).attr("data-series",$(this).attr("data-series")).attr("data-rarities",$(this).attr("data-rarities")).removeAttr("data-series-selected").removeAttr("data-rarity-selected").append(i).append(n).append(s).append(r),void 0!==$(this).attr("data-rarities")?a.attr("data-rarity-selected",e):a.removeAttr("data-rarity-selected");var o=a.offset(),l=a.outerHeight();if(a.removeClass("selected").next(".rlg-item").addClass("selected"),closeItemOptions(),"undefined"!=typeof showBlueprintTooltip&&showBlueprintTooltip&&"true"==$(this).attr("data-blueprintable")&&!$("#blueprintHelpTooltip").length){var c=$('<div id="blueprintHelpTooltip" class="rlg-tooltip right"><p>Click item for blueprint options</p></div>').hide().appendTo($("body"));c.css("left",o.left-c.outerWidth()-10+"px").css("top",o.top+l/2-c.outerHeight()/2+"px"),setTimeout((function(){c.fadeIn()}),400)}}));var i,n,s,r="";function o(e,t){r=e,(t=void 0===t||t)&&closeItemOptions();var a=$("#toggleblueprints").is(":checked");if(""!==e){$(".rlg-trade-selector-items .rlg-trade-selector-section .rlg-trade-selector-item").hide(),$(".rlg-trade-selector-items .rlg-trade-selector-section").hide();const t=new Fuse(allItems,{includeScore:!0,minMatchCharLength:1,ignoreFieldNorm:!0,threshold:.3,keys:["name"]}).search(e);for(let e=t.length-1;e>=0;e--){const i=t[e];if(!a||a&&1==i.item.blueprintable){let e=$("#item-"+i.item.id),t=e.parent(".rlg-trade-selector-section");e.insertAfter(e.parent().children(".rlg-trade-selector-item").first()),e.show(),t.insertAfter(t.parent().children(".rlg-trade-selector-section").first()),t.show()}}$(".rlg-trade-selector-items").scrollTop(0)}else a?($(".rlg-trade-selector-items .rlg-trade-selector-section").hide(),$(".rlg-trade-selector-items .rlg-trade-selector-section .rlg-trade-selector-item[data-blueprintable=true]").show().parent(".rlg-trade-selector-section").show()):($(".rlg-trade-selector-items .rlg-trade-selector-section .rlg-trade-selector-item").show(),$(".rlg-trade-selector-items .rlg-trade-selector-section").show())}$(".rlg-trade-display-container .rlg-trade-selector-container .rlg-trade-selector-header input.rlg-input[name=search]").keyup((i=function(e){r!=$(this).val()&&o($(this).val())},n=100,s=0,function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout((function(){i.apply(e,t)}),n||0)})),$("#rlg-trade-creator .rlg-popup-options .rlg-popup-options-close").click((function(){closeItemOptions()})),$("#rlg-trade-creator .rlg-popup-options #blueprint").change((function(){var e=$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected");if(e.attr("data-blueprint",$(this).prop("checked")),$(this).prop("checked")){var t="",a=e.attr("data-item");void 0!==a&&!1!==a?(t="/../content/media/items/avatar/220px/blueprints/source/"+a+".png",selectedItemSeries=e.attr("data-series-selected"),t="undefined"!=typeof selectedItemSeries&&!1!==selectedItemSeries&&parseInt(selectedItemSeries)>0&&"undefined"!=typeof seriesbp&&void 0!==seriesbp[selectedItemSeries]&&1==seriesbp[selectedItemSeries]?"/../content/media/items/avatar/220px/blueprints/source/"+selectedItemSeries+"/"+a+".png":"/../content/media/items/avatar/220px/blueprints/source/"+a+".png"):t=e.attr("data-originalimg"),e.find(".rlg-item__image").attr("src",t)}else{var i=e.attr("data-originalimg");e.find(".rlg-item__image").attr("src",i)}})),$("#rlg-trade-creator .rlg-popup-options .rlg-select").change((function(){if(selectedItem=$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected"),"paint"==$(this).attr("name"))if(selectedItem.attr("data-paint",$(this).val()),$(this).val()>0){selectedItem.find(".rlg-item__paint").remove();var e='<div class="rlg-item__paint --'+$("option:selected",this).text().replace(/\s+/g,"-").toLowerCase()+'" data-hex="'+$("option:selected",this).attr("data-color")+'" data-name="'+$("option:selected",this).text()+'">'+$("option:selected",this).text()+"</div>";selectedItem.append(e)}else selectedItem.find(".rlg-item__paint").remove();else if("certification"==$(this).attr("name"))if(selectedItem.attr("data-cert",$(this).val()),$(this).val()>0){selectedItem.find(".rlg-item__text .rlg-item__cert").remove();var t='<div class="rlg-item__cert">'+$("option:selected",this).text()+"</div>";selectedItem.find(".rlg-item__text").append(t)}else selectedItem.find(".rlg-item__text .rlg-item__cert").remove();else if("amount"==$(this).attr("name")){if(selectedItem.attr("data-quantity",$(this).val()),selectedItem.find(".rlg-item__quantity").remove(),$(this).val()>1){var a='<div class="rlg-item__quantity --quantity-'+$("option:selected",this).text()+" --"+selectedItem.attr("data-rarity").replace(/\s+/g,"-").toLowerCase()+(parseInt($("option:selected",this).text())>=100?parseInt($("option:selected",this).text())>=1e4?" superduperwide":" wide":"")+'">'+$("option:selected",this).text()+"</div>";selectedItem.append(a)}}else if("itemseries"==$(this).attr("name"))selectedItem.attr("data-series-selected",$(this).val()),selectedItem.attr("data-blueprintable")&&"true"==selectedItem.attr("data-blueprint")&&($(this).val()>0&&"undefined"!=typeof seriesbp&&void 0!==seriesbp[$(this).val()]&&1==seriesbp[$(this).val()]?selectedItem.find(".rlg-item__image").attr("src","/../content/media/items/avatar/220px/blueprints/source/"+$(this).val()+"/"+selectedItem.attr("data-item")+".png"):selectedItem.find(".rlg-item__image").attr("src","/../content/media/items/avatar/220px/blueprints/source/"+selectedItem.attr("data-item")+".png"));else if("itemrarity"==$(this).attr("name")){selectedItem.children(".rlg-item__gradient").removeClass().addClass("rlg-item__gradient").addClass("--"+allRarities[$(this).val()]),selectedItem.attr("data-rarity-selected",$(this).val()),selectedItem.attr("data-rarityid",$(this).val()),selectedItem.attr("data-rarity",allRarities[$(this).val()])}else"amount_key"==$(this).attr("name")&&"key"==selectedItem.attr("data-name").toLowerCase()&&selectedItem.attr("data-quantity",$(this).val())})),$("#amount_credits").change((function(){if(selectedItem=$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected"),"credits"==selectedItem.attr("data-name").toLowerCase()){selectedItem.attr("data-quantity",$(this).val()),selectedItem.find(".rlg-item__quantity").remove();var e='<div class="rlg-item__quantity --quantity-'+$(this).val()+" --premium"+(parseInt($(this).val())>=100?parseInt($(this).val())>=1e4?" superduperwide":" wide":"")+'">'+$(this).val()+"</div>";selectedItem.append(e)}})),$("#toggleblueprints").change((function(){$("#toggleblueprints").is(":checked")?($(".rlg-trade-selector-items .rlg-trade-selector-item[data-blueprintable=false]").hide(),$(".rlg-trade-selector-items .rlg-trade-selector-item[data-blueprintable=true]").each((function(){$(this).children("img").attr("src","/../content/media/items/avatar/220px/blueprints/source/"+$(this).attr("data-item")+".png"),$(this).find(".rlg-items-item-value.itemPrice").addClass("hidden").end().find(".rlg-items-item-value.blueprintPrice").removeClass("hidden")}))):($(".rlg-trade-selector-items .rlg-trade-selector-item[data-blueprintable=false]").show(),$(".rlg-trade-selector-items .rlg-trade-selector-item[data-blueprintable=true]").each((function(){$(this).children("img").attr("src",$(this).attr("data-originalimg")),$(this).find(".rlg-items-item-value.blueprintPrice").addClass("hidden").end().find(".rlg-items-item-value.itemPrice").removeClass("hidden")}))),$(".rlg-trade-display-container .rlg-trade-selector-container .rlg-trade-selector-header input.rlg-input[name=search]").val(r),o(r)})),$(document).on("dragenter",".rlg-trade__items .rlg-item",(function(e){$(".rlg-trade__items .rlg-item.selected").removeClass("selected");let t=$(e.target);t.hasClass("rlg-item__gradient")&&(t=t.parent(".rlg-item")),t.addClass("selected")})),$(document).on("dragover",".rlg-trade__items .rlg-item",(function(e){e.preventDefault()})),$(document).on("drop",".rlg-trade__items .rlg-item",(function(e){if(e.preventDefault(),$(".dragging").hasClass("rlg-trade-selector-item"))$(".dragging").click().removeClass("dragging");else{if(!$(".dragging").hasClass("rlg-item"))return!1;{$(".rlg-trade__items .rlg-item.selected").removeClass("selected"),$(".dragging").addClass("selected");let t=$(e.target);t.hasClass("rlg-item__gradient")&&(t=t.parent(".rlg-item")),t.swapWith(".dragging"),$(".dragging").removeClass("dragging")}}return!0})),$(document).on("dragstart",".rlg-trade-selector-item",(function(e){closeItemOptions(),$(".dragging").removeClass("dragging"),$(this).addClass("dragging")})),$(document).on("dragend",".rlg-trade-selector-item",(function(e){$(".dragging").removeClass("dragging")})),$(document).on("drop",".rlg-input",(function(e){e.preventDefault()})),$(document).on("dragstart",".rlg-trade__items .rlg-item",(function(e){closeItemOptions();var t=$(this).attr("data-name");return void 0!==t&&!1!==t&&($(".dragging").removeClass("dragging"),$(this).addClass("dragging"),!0)})),$(document).on("dragend",".rlg-trade__items .rlg-item",(function(e){$(".dragging").removeClass("dragging"),closeItemOptions()})),$("#rlg-trade-creator .rlg-popup-options .rlg-btn-delete").click((function(){var e=$("#rlg-trade-creator .rlg-trade__items .rlg-item.selected"),t=e.get(0),a=!1;for(e.hasClass("--large")&&(a=!0);t.attributes.length>0;)t.removeAttribute(t.attributes[0].name);e.addClass("rlg-item selected").empty(),a&&e.addClass("--large"),closeItemOptions()})),!0===swooshWooshPoosh?(window.addNewTrade=function(){if($(".rlg-trade-display-container .rlg-trade-note-container .rlg-trade-note-area textarea.rlg-input").val().length>=2e3)return $.siteAlert("Trade note cannot contain more than 2000 characters","error"),a(),!1;var e=[],t=[],i=!1;return $("#rlg-trade-creator .rlg-trade__itemshas .rlg-item").each((function(){var t={},n=$(this).attr("data-name"),s=$(this).attr("data-paint"),r=$(this).attr("data-cert"),o=$(this).attr("data-item"),l=$(this).attr("data-rarityid"),c=$(this).attr("data-quantity"),d=$(this).attr("data-blueprint"),u=$(this).attr("data-series-selected"),p=$(this).attr("data-rarity-selected"),m=!1;if(void 0!==n&&!1!==n){if(void 0===o||!1===o)return $.siteAlert("Item must not be empty","error"),a(),!1;if(void 0===l||!1===l)return $.siteAlert("Rarity must not be empty","error"),a(),!1;t.itemId=$(this).attr("data-item"),void 0!==s&&!1!==s?(t.paint=$(this).attr("data-paint"),!0===m||(m="0"!=s)):t.paint=0,void 0!==r&&!1!==r?(t.cert=$(this).attr("data-cert"),!0===m||(m="0"!=r)):t.cert=0,void 0!==c&&!1!==c&&$(this).attr("data-quantity")>1&&(t.quantity=$(this).attr("data-quantity")),t.blueprint=void 0!==d&&!1!==d&&"true"==d,void 0!==u&&!1!==u&&parseInt(u)>0?t.series=parseInt(u):t.series=0,void 0!==p&&!1!==p&&parseInt(p)>0?t.rarity=parseInt(p):t.rarity=0,i="0"!=l||!1!==m,e.push(t)}})),$("#rlg-trade-creator .rlg-trade__itemswants .rlg-item").each((function(){var e={},n=$(this).attr("data-name"),s=$(this).attr("data-paint"),r=$(this).attr("data-cert"),o=$(this).attr("data-item"),l=$(this).attr("data-rarityid"),c=$(this).attr("data-quantity"),d=$(this).attr("data-blueprint"),u=$(this).attr("data-series-selected"),p=$(this).attr("data-rarity-selected"),m=!1;if(void 0!==n&&!1!==n){if(void 0===o||!1===o)return $.siteAlert("Item must not be empty","error"),a(),!1;if(void 0===l||!1===l)return $.siteAlert("Rarity must not be empty","error"),a(),!1;e.itemId=$(this).attr("data-item"),void 0!==s&&!1!==s?(e.paint=$(this).attr("data-paint"),!0===m||(m="0"!=s)):e.paint=0,void 0!==r&&!1!==r?(e.cert=$(this).attr("data-cert"),!0===m||(m="0"!=r)):e.cert=0,void 0!==c&&!1!==c&&$(this).attr("data-quantity")>1&&(e.quantity=$(this).attr("data-quantity")),e.blueprint=void 0!==d&&!1!==d&&"true"==d,void 0!==u&&!1!==u&&parseInt(u)>0?e.series=parseInt(u):e.series=0,void 0!==p&&!1!==p&&parseInt(p)>0?e.rarity=parseInt(p):e.rarity=0,i&&(i="0"!=l||!1!==m),t.push(e)}})),e.length>15?($.siteAlert("Maximum amount of items you can trade is 15","error"),a(),!1):e.length<=0?($.siteAlert("Minimum amount of items you can trade is 1","error"),a(),!1):t.length>15?($.siteAlert("Maximum amount of items you can trade is 15","error"),a(),!1):t.length<=0?($.siteAlert("Minimum amount of items you can trade is 1","error"),a(),!1):!1===i?($.siteAlert("Common items must be certified or painted","error"),a(),!1):JSON.stringify(e)==JSON.stringify(t)?($.siteAlert("No reason to trade identical items","error"),a(),!1):""===$("#platform").val()?($.siteAlert("Platform must be specified","error"),a(),!1):($("#rlg-addTradeForm").append('<textarea name="ownerItems" id="ownerItems" style="display: none !important;">'+JSON.stringify(e)+"</textarea>"),$("#rlg-addTradeForm").append('<textarea name="tradeItems" id="tradeItems" style="display: none !important;">'+JSON.stringify(t)+"</textarea>"),!0)},$(".rlg-trade-selector-container .rlg-trade-selector-items").scroll((function(){closeItemOptions()})),simple_tooltip(".rlg-item__paint","rlg-item-tooltip"),$(".rlg-trade__bookmark").click((function(e){e.preventDefault(),bookmarkTrade($(this).attr("data-alias"),$(this))}))):($("#rlg-addTradeForm").submit((function(e){if($(".rlg-trade-display-container .rlg-trade-note-container .rlg-trade-note-area textarea.rlg-input").val().length>=2e3)return $.siteAlert("Trade note cannot contain more than 2000 characters","error"),e.preventDefault(),!1;var t=[],a=[],i=!1;return $("#rlg-trade-creator .rlg-trade__itemshas .rlg-item").each((function(){var a={},n=$(this).attr("data-name"),s=$(this).attr("data-paint"),r=$(this).attr("data-cert"),o=$(this).attr("data-item"),l=$(this).attr("data-rarityid"),c=$(this).attr("data-quantity"),d=$(this).attr("data-blueprint"),u=$(this).attr("data-series-seclted"),p=$(this).attr("data-rarity-seclted"),m=!1;void 0!==n&&!1!==n&&(void 0!==o&&!1!==o?void 0!==l&&!1!==l?(a.itemId=$(this).attr("data-item"),void 0!==s&&!1!==s?(a.paint=$(this).attr("data-paint"),!0===m||(m="0"!=s)):a.paint=0,void 0!==r&&!1!==r?(a.cert=$(this).attr("data-cert"),!0===m||(m="0"!=r)):a.cert=0,void 0!==c&&!1!==c&&$(this).attr("data-quantity")>1&&(a.quantity=$(this).attr("data-quantity")),a.blueprint=void 0!==d&&!1!==d&&"true"==d,void 0!==u&&!1!==u&&parseInt(u)>0?a.series=parseInt(u):a.series=0,void 0!==p&&!1!==p&&parseInt(p)>0?a.rarity=parseInt(p):a.rarity=0,i="0"!=l||!1!==m,t.push(a)):($.siteAlert("Rarity must not be empty","error"),e.preventDefault()):($.siteAlert("Item must not be empty","error"),e.preventDefault()))})),$("#rlg-trade-creator .rlg-trade__itemswants .rlg-item").each((function(){var t={},n=$(this).attr("data-name"),s=$(this).attr("data-paint"),r=$(this).attr("data-cert"),o=$(this).attr("data-item"),l=$(this).attr("data-rarityid"),c=$(this).attr("data-quantity"),d=$(this).attr("data-blueprint"),u=$(this).attr("data-series-selected"),p=$(this).attr("data-rarity-selected"),m=!1;void 0!==n&&!1!==n&&(void 0!==o&&!1!==o?void 0!==l&&!1!==l?(t.itemId=$(this).attr("data-item"),void 0!==s&&!1!==s?(t.paint=$(this).attr("data-paint"),!0===m||(m="0"!=s)):t.paint=0,void 0!==r&&!1!==r?(t.cert=$(this).attr("data-cert"),!0===m||(m="0"!=r)):t.cert=0,void 0!==c&&!1!==c&&$(this).attr("data-quantity")>1&&(t.quantity=$(this).attr("data-quantity")),t.blueprint=void 0!==d&&!1!==d&&"true"==d,void 0!==u&&!1!==u&&parseInt(u)>0?t.series=parseInt(u):t.series=0,void 0!==p&&!1!==p&&parseInt(p)>0?t.rarity=parseInt(p):t.rarity=0,i&&(i="0"!=l||!1!==m),a.push(t)):($.siteAlert("Rarity must not be empty","error"),e.preventDefault()):($.siteAlert("Item must not be empty","error"),e.preventDefault()))})),t.length>15?($.siteAlert("Maximum amount of items you can trade is 15","error"),e.preventDefault(),!1):t.length<=0?($.siteAlert("Minimum amount of items you can trade is 1","error"),e.preventDefault(),!1):a.length>15?($.siteAlert("Maximum amount of items you can trade is 15","error"),e.preventDefault(),!1):a.length<=0?($.siteAlert("Minimum amount of items you can trade is 1","error"),e.preventDefault(),!1):!1===i?($.siteAlert("Common items must be certified or painted","error"),e.preventDefault(),!1):JSON.stringify(t)==JSON.stringify(a)?($.siteAlert("No reason to trade identical items","error"),e.preventDefault(),!1):""===$("#platform").val()?($.siteAlert("Platform must be specified","error"),e.preventDefault(),!1):($("#rlg-addTradeForm").append('<textarea name="ownerItems" id="ownerItems" style="display: none !important;">'+JSON.stringify(t)+"</textarea>"),void $("#rlg-addTradeForm").append('<textarea name="tradeItems" id="tradeItems" style="display: none !important;">'+JSON.stringify(a)+"</textarea>"))})),$(".rlg-trade-selector-container .rlg-trade-selector-items").scroll((function(){closeItemOptions()})),simple_tooltip(".rlg-item__paint","rlg-item-tooltip"),$(".rlg-trade__bookmark").click((function(){e.preventDefault(),bookmarkTrade($(this).attr("data-alias"),$(this))}))),$(".rlg-trade-display-container.is--gif").hover((function(){var e=$(this).find(".rlg-trade-display-header a .rlg-trade-display-header-left img").attr("src").split(".").slice(0,-1).join(".");$(this).find(".rlg-trade-display-header a .rlg-trade-display-header-left img").attr("src",e+".gif")}),(function(){var e=$(this).find(".rlg-trade-display-header a .rlg-trade-display-header-left img").attr("src").split(".").slice(0,-1).join(".");$(this).find(".rlg-trade-display-header a .rlg-trade-display-header-left img").attr("src",e+".png")})),$(".rlg-trade-note-header-show-converted").click((function(e){e.preventDefault(),$(".rlg-trade-note-header-converted span").toggleClass("visible"),$(".rlg-trade-note-user").toggleClass("col-1-1").toggleClass("col-1-2"),$(".rlg-trade-note-converted-container").toggleClass("visible");var t=$(this).text();$(".rlg-trade-note-header-show-converted").text("Show converted notes"==t?"Hide converted notes":"Show converted notes")})),"undefined"!=typeof showBlueprintFilterTooltip&&showBlueprintFilterTooltip&&($("#blueprintHelpTooltip").length||setTimeout((function(){if($("#filterItemType_chosen").length){var e=$('<div id="blueprintHelpTooltip" class="rlg-tooltip up"><p>Looking for blueprints?</p></div>').hide().appendTo($("body")),t=$("#filterItemType_chosen").offset(),a=$("#filterItemType_chosen").outerHeight(),i=$("#filterItemType_chosen").outerWidth();e.css("left",t.left-e.outerWidth()/2+i/2+"px").css("top",t.top+a+14+"px"),setTimeout((function(){e.fadeIn()}),400)}}),400)),$("#filterItemType").on("chosen:ready",(function(){$("#filterItemType_chosen").click((function(){showBlueprintFilterTooltip&&$("#blueprintHelpTooltip").length&&$.post("/ajaxfunctions/updateTooltipSeen.php",{tooltip:"blueprintFilterTooltipSeen",csrf_token:window.csrf_token}).done((function(e){"success"==e.substring(0,7)&&($("#blueprintHelpTooltip").fadeOut("normal",(function(){$(this).remove()})),showBlueprintFilterTooltip=!1)}))}))})),$("#trade-warning-banner-close").click((function(){$("#trade-warning-banner").remove(),createCookie("sawPhishingWarning",!0,30)})),$(".rlg-trading__loadmore button").click((function(e){e.preventDefault(),fetchTrades()}))})),$(document).ready((function(){$(".rlg-training-code").mousedown((function(){var e,t;window.getSelection&&document.createRange?(t=window.getSelection(),(e=document.createRange()).selectNodeContents($(this)[0]),t.removeAllRanges(),t.addRange(e)):document.selection&&document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText($(this)[0]),e.select())})),$(".rlg-training-code").mouseup((function(e){e.preventDefault()})),$(".rlg-training-like").click((function(){likeTrainingSequence($(this).attr("data-code"),$(this))})),$(".rlg-training-favorite").click((function(){favTrainingSequence($(this).attr("data-code"),$(this))})),$("#rlg-addSequenceForm").submit((function(e){if($("#rlg-addSequenceForm .rlg-form-section #sequencedescription").val().length>=2e3)return $.siteAlert("Description cannot contain more than 2000 characters","error"),e.preventDefault(),!1;if($("#rlg-addSequenceForm .rlg-form-section #sequencetitle").val().length>30)return $.siteAlert("Sequence title must not contain more than 48 characters","error"),e.preventDefault(),!1;if($("#rlg-addSequenceForm .rlg-form-section #sequencetitle").val().length<3)return $.siteAlert("Sequence title must contain at least 3 characters","error"),e.preventDefault(),!1;if($("#rlg-addSequenceForm .rlg-form-section #sequencecode").val().length>19)return $.siteAlert("Sequence download code must consist of 19 characters","error"),e.preventDefault(),!1;if(!new RegExp("^[a-zA-Z0-9]{4}(-[a-zA-Z0-9]{4}){3}$").test($("#rlg-addSequenceForm .rlg-form-section #sequencecode").val()))return $.siteAlert("Sequence download code is invalid","error"),e.preventDefault(),!1;if(""===$("#rlg-addSequenceForm .rlg-form-section #sequenceshots").val())return $.siteAlert("Shots amount was not provided","error"),e.preventDefault(),!1;if($("#rlg-addSequenceForm .rlg-form-section #sequenceshots").val()<=0)return $.siteAlert("Shots amount must be more than 0","error"),e.preventDefault(),!1;if(""===$("#rlg-addSequenceForm .rlg-form-section #sequencemap").val())return $.siteAlert("Map was not provided","error"),e.preventDefault(),!1;if(""===$("#rlg-addSequenceForm .rlg-form-section #sequencetype").val())return $.siteAlert("Type was not provided","error"),e.preventDefault(),!1;if(""===$("#rlg-addSequenceForm .rlg-form-section #sequencedifficulty").val())return $.siteAlert("Difficulty was not provided","error"),e.preventDefault(),!1;var t=$("#rlg-addSequenceForm .rlg-form-section #sequenceplatform");return"pc"!==t.val()&&"ps4"!==t.val()&&"xbox"!==t.val()?($.siteAlert("Invalid platform specified","error"),e.preventDefault(),!1):void 0}))})),jQuery((function(e){e.fn.hScroll=function(t){t=t||120,e(this).bind("DOMMouseScroll mousewheel",(function(a){var i=a.originalEvent,n=i.detail?i.detail*-t:i.wheelDelta,s=e(this).scrollLeft();s+=n>0?-t:t,e(this).scrollLeft(s),a.preventDefault()}))}})),$.fn.isHScrollable=function(){return this[0].scrollWidth>this[0].clientWidth},$.fn.isVScrollable=function(){return this[0].scrollHeight>this[0].clientHeight},$.fn.isScrollable=function(){return this[0].scrollWidth>this[0].clientWidth||this[0].scrollHeight>this[0].clientHeight},$(document).ready((function(){if($(".rlg-hero__platforms").length>0){var e=$(".rlg-hero__platforms");e.hScroll(),$(e).isScrollable()&&$(".rlg-hero__networks").addClass("--scrollable")}$.fn.extend({toggleText:function(e,t){return this.text(this.text()==t?e:t)}});var t=$("#country-tag").text();$(".rlg-account #country").val(t);var a=$("#region-tag").text();a="EU"==a?"1":"US West"==a?"2":"US East"==a?"3":"Oceania"==a?"5":"All"==a?"4":"1",$(".rlg-account #region").val(a);var i=$("#platform-tag").text();$(".rlg-account #platform").val(i),$("#user-all-items").click((function(){$("#user-item-list").toggleClass("active")})),$(".rlg-match-single").click((function(){$(this).toggleClass("active")})),$("#btn-account-bio").on("click",(function(){updateUserBio($("textarea#account-bio").val())})),$(".rlg-hero__networks").on("contextmenu","a,span",(function(e){var t=$(this).attr("data-plat"),a=$(this).attr("data-platform"),i=$(this).attr("data-account"),n=$(this).attr("data-unlink");t&&a&&i&&(e.preventDefault(),showPopupOptions($(this),a),$(".rlg-popup-options #accountval").val(i),$(".rlg-popup-options a.rlg-btn-delete").attr("href",n))})),$(".rlg-user-show-more").click((function(){var e=$(this).attr("data-type");$(" > i",this).toggleClass("fa fa-chevron-down"),$(" > i",this).toggleClass("fa fa-chevron-up"),$(".rlg-user-logs__"+e).slideToggle()})),$(".rlg-more-toggle").click((function(){var e=$(this).attr("aria-controls");$(this).toggleClass("--toggled"),$("#"+e).attr("aria-expanded","true"),$("#"+e).fadeToggle()})),$(".rlg-user-admin-details__action-copy").click((function(){var e=document.createElement("input");e.setAttribute("value",$(this).attr("copy-value")),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)})),$(".rlg-user-admin-details__action-toggle").click((function(){var e=$(this).attr("table-toggle");$(" > i",this).toggleClass("fa fa-chevron-down"),$(" > i",this).toggleClass("fa fa-chevron-up"),$(".rlg-user-admin-details__table-"+e).slideToggle()}))})),$(document).ready((function(){if($("#websocket").length>0){const a="ws.rocket-league.com",i=JSON.parse(window.wsd),n=i.x,s=i.p,r=`wss://${a}:${n}/web?k=${i.k}&t=${i.t}&p=${s}&u=${i.u}`,o=$("#websocket").data("user");let l,c,d,u,p=$("#notifications");const m=$("#notifications .rlg-notifcations__count"),g=new Audio("/assets/audio/blop.mp3");var e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);null===localStorage.getItem("tabId")&&localStorage.setItem("tabId",e),window.addEventListener("unload",(function(){localStorage.getItem("tabId")===e&&localStorage.removeItem("tabId")}));var t=new WebSocket(r);t.onmessage=function(t){if(c=JSON.parse(t.data),d=c.payload.data,"sys_auth"==c.type&&(uuid=c.payload.uuid,$("#websocket").attr("data-uuid",uuid)),"messaging"==c.type&&"unread"!=d.content){if("directmessage"!=d.content)u=parseInt(m.text()),p.hasClass("--has-notifications")?m.text(u+1):(p.addClass("--has-notifications"),p.append('<span class="rlg-notifcations__count">1</span>'));else{let e=$("#current-chat");0==e.length&&d.sender!=o&&($(".rlg-message-notification").hasClass("--new")||$(".rlg-message-notification").addClass("--new")),0!=e.length&&(d.sender!=o?updateChat(d.sender,d.image,d.text,!1):updateChat(d.sender,d.image,d.text,d.chatUser))}d.sender!=o&&(updateSiteTitleBadge(d.notifications.all),localStorage.getItem("tabId")===e&&g.play()),l=`\n          <a href="${d.cleanUrl?d.cleanUrl:d.url}" class="rlg-pn">\n            <img src="${d.image}" alt="${d.sender}" class="rlg-notification__avatar" />\n            <div class="rlg-notification__content">\n              <span class="rlg-notification__title">${d.title}</span>\n              ${d.text?'<span class="rlg-notification__text">'+d.text+"</span>":""}\n            </div>\n          </a>\n        `,d.sender!=o&&(0!=$("#current-chat").length&&"directmessage"==d.content||$(l).appendTo(".rlg-pns").delay(10,"show").queue("show",(function(){$(this).addClass("--visible")})).dequeue("show").delay(8e3).queue((function(){$(this).remove()})))}else if("messaging"==c.type&&"unread"==d.content&&d.sender!=o){$(".rlg-message-notification").hasClass("--new")&&0==d.messages?$(".rlg-message-notification").removeClass("--new"):$(".rlg-message-notification").hasClass("--new")&&d.messages>0||$(".rlg-message-notification:not(.--new)").length>0&&d.messages>0&&$(".rlg-message-notification").addClass("--new");const e=$("#notifications");e.hasClass("--has-notifications")?d.notifications.notifications>0?$(".rlg-notifcations__count").text(d.notifications.notifications):(e.removeClass("--has-notifications"),$(".rlg-notifcations__count").remove()):d.notifications.notifications>0&&e.addClass("--has-notifications").prepend(`<span class="rlg-notifcations__count">${d.notifications.notifications}</span>`),updateSiteTitleBadge(d.all)}},t.onclose=function(e){}}})),$(document).ready((function(){var e=!1;0==e&&$("#xbox-auth").click((function(){$(this).append("<span>Redirecting…</span>"),e=!0}))}));